

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>lavuelib.displayExtensions &#8212; LaVue 2.83.0 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">LaVue 2.83.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">lavuelib.displayExtensions</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for lavuelib.displayExtensions</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright (C) 2017  DESY, Christoph Rosemann, Notkestr. 85, D-22607 Hamburg</span>
<span class="c1">#</span>
<span class="c1"># lavue is an image viewing program for photon science imaging detectors.</span>
<span class="c1"># Its usual application is as a live viewer using hidra as data source.</span>
<span class="c1">#</span>
<span class="c1"># This program is free software; you can redistribute it and/or</span>
<span class="c1"># modify it under the terms of the GNU General Public License</span>
<span class="c1"># as published by the Free Software Foundation in  version 2</span>
<span class="c1"># of the License.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program; if not, write to the Free Software</span>
<span class="c1"># Foundation, Inc., 51 Franklin Street, Fifth Floor,</span>
<span class="c1"># Boston, MA  02110-1301, USA.</span>
<span class="c1">#</span>
<span class="c1"># Authors:</span>
<span class="c1">#     Christoph Rosemann &lt;christoph.rosemann@desy.de&gt;</span>
<span class="c1">#     Jan Kotanski &lt;jan.kotanski@desy.de&gt;</span>
<span class="c1">#</span>

<span class="sd">&quot;&quot;&quot; image display widget &quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">pyqtgraph</span> <span class="k">as</span> <span class="nn">_pg</span>
<span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="kn">import</span> <span class="n">QtCore</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">pyqtgraph.graphicsItems.ROI</span> <span class="kn">import</span> <span class="n">ROI</span><span class="p">,</span> <span class="n">LineROI</span><span class="p">,</span> <span class="n">Handle</span>
<span class="kn">from</span> <span class="nn">pyqtgraph.graphicsItems.IsocurveItem</span> <span class="kn">import</span> <span class="n">IsocurveItem</span>

<span class="n">_VMAJOR</span><span class="p">,</span> <span class="n">_VMINOR</span><span class="p">,</span> <span class="n">_VPATCH</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span> \
    <span class="k">if</span> <span class="n">_pg</span><span class="o">.</span><span class="n">__version__</span> <span class="k">else</span> <span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">)</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;lavue&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="HandleWithSignals"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.HandleWithSignals">[docs]</a><span class="k">class</span> <span class="nc">HandleWithSignals</span><span class="p">(</span><span class="n">Handle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; handle with signals</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) hover event emitted</span>
    <span class="n">hovered</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param pos: position of handle</span>
<span class="sd">        :type pos: [float, float]</span>
<span class="sd">        :param center: center of handle</span>
<span class="sd">        :type center: [float, float]</span>
<span class="sd">        :param parent: roi object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.graphicsItems.ROI.ROI`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="n">center</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Scale/rotate handles must have either the same x or y &quot;</span>
                <span class="s2">&quot;coordinate as their center point.&quot;</span><span class="p">)</span>
        <span class="n">Handle</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">handleSize</span><span class="p">,</span> <span class="n">typ</span><span class="o">=</span><span class="s1">&#39;sr&#39;</span><span class="p">,</span>
                        <span class="n">pen</span><span class="o">=</span><span class="n">parent</span><span class="o">.</span><span class="n">handlePen</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">pos</span> <span class="o">*</span> <span class="n">parent</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">])</span>

<div class="viewcode-block" id="HandleWithSignals.hoverEvent"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.HandleWithSignals.hoverEvent">[docs]</a>    <span class="k">def</span> <span class="nf">hoverEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; hover event</span>

<span class="sd">        :param ev: close event</span>
<span class="sd">        :type ev: :class:`pyqtgraph.QtCore.QEvent`:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Handle</span><span class="o">.</span><span class="n">hoverEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hovered</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="SimpleLineROI"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.SimpleLineROI">[docs]</a><span class="k">class</span> <span class="nc">SimpleLineROI</span><span class="p">(</span><span class="n">LineROI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; simple line roi &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">pos2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param pos1: start position</span>
<span class="sd">        :type pos1: [float, float]</span>
<span class="sd">        :param pos2: end position</span>
<span class="sd">        :type pos2: [float, float]</span>
<span class="sd">        :param args: dictionary with ROI parameters</span>
<span class="sd">        :type args: :obj:`dict`&lt;:obj:`str`, :obj:`any`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pos1</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">pos1</span><span class="p">)</span>
        <span class="n">pos2</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">pos2</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">pos2</span> <span class="o">-</span> <span class="n">pos1</span>
        <span class="n">ln</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

        <span class="n">ROI</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">ln</span><span class="p">,</span> <span class="n">width</span><span class="p">),</span> <span class="n">angle</span><span class="o">=</span><span class="n">ang</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="n">h1pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
        <span class="n">h1center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
        <span class="n">h2pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
        <span class="n">h2center</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
        <span class="n">vpos</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">vcenter</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle1</span> <span class="o">=</span> <span class="n">HandleWithSignals</span><span class="p">(</span><span class="n">h1pos</span><span class="p">,</span> <span class="n">h1center</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle2</span> <span class="o">=</span> <span class="n">HandleWithSignals</span><span class="p">(</span><span class="n">h2pos</span><span class="p">,</span> <span class="n">h2center</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vhandle</span> <span class="o">=</span> <span class="n">HandleWithSignals</span><span class="p">(</span><span class="n">vcenter</span><span class="p">,</span> <span class="n">vpos</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addHandle</span><span class="p">(</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;handle1&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;sr&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span> <span class="n">h1center</span><span class="p">,</span>
             <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">h1pos</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle1</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addHandle</span><span class="p">(</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;handle2&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;sr&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span> <span class="n">h2center</span><span class="p">,</span>
             <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">h2pos</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle2</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addHandle</span><span class="p">(</span>
            <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;vhandle&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;sr&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">:</span> <span class="n">vcenter</span><span class="p">,</span>
             <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">vpos</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">vhandle</span><span class="p">})</span>
        <span class="c1"># self.handle1 = self.addScaleRotateHandle([0, 0.5], [1, 0.5])</span>
        <span class="c1"># self.handle2 = self.addScaleRotateHandle([1, 0.5], [0, 0.5])</span>

<div class="viewcode-block" id="SimpleLineROI.getCoordinates"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.SimpleLineROI.getCoordinates">[docs]</a>    <span class="k">def</span> <span class="nf">getCoordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the roi coordinates</span>

<span class="sd">        :param trans: transposed flag</span>
<span class="sd">        :type trans: :obj:`bool`</span>
<span class="sd">        :returns: x1, y1, x2, y2 positions of the roi</span>
<span class="sd">        :rtype: [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ang</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;angle&#39;</span><span class="p">]</span>
        <span class="n">pos1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span>
        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span>
        <span class="n">ra</span> <span class="o">=</span> <span class="n">ang</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">180.</span>
        <span class="n">pos2</span> <span class="o">=</span> <span class="n">pos1</span> <span class="o">+</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span>
            <span class="n">size</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">ra</span><span class="p">),</span>
            <span class="n">size</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">ra</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pos1</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos1</span><span class="o">.</span><span class="n">y</span><span class="p">(),</span> <span class="n">pos2</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos2</span><span class="o">.</span><span class="n">y</span><span class="p">(),</span> <span class="n">size</span><span class="o">.</span><span class="n">y</span><span class="p">()]</span></div></div>


<div class="viewcode-block" id="RegionItem"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionItem">[docs]</a><span class="k">class</span> <span class="nc">RegionItem</span><span class="p">(</span><span class="n">IsocurveItem</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param points: list of points</span>
<span class="sd">        :type points:  :obj:`list` &lt; (float, float) &gt;</span>
<span class="sd">        :param pen: qt pen</span>
<span class="sd">        :type pen: :class:`pyqtgraph.QtGui.QPen`</span>
<span class="sd">        :param args: more params</span>
<span class="sd">        :type args: :obj:`dict` &lt;:obj:`str`, `any`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">IsocurveItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">pen</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="c1"># if points and points[0] and points[0][0]:</span>
        <span class="c1">#     self.setPos(*points[0][0])</span>

<div class="viewcode-block" id="RegionItem.generatePath"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionItem.generatePath">[docs]</a>    <span class="k">def</span> <span class="nf">generatePath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; generate QPainterPath</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QPainterPath</span><span class="p">()</span>
        <span class="c1"># nopos = True</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">line</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">moveTo</span><span class="p">(</span><span class="o">*</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="c1"># if nopos:</span>
                <span class="c1">#     self.setPos(*line[0])</span>
                <span class="c1">#     nopos = False</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">lineTo</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DisplayExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension">[docs]</a><span class="k">class</span> <span class="nc">DisplayExtension</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; display extension for ImageDisplayWidget</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QtCore</span><span class="o">.</span><span class="n">QObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1">#: (:obj:`str`) extension name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span>
        <span class="c1">#: (:class:`pyqtgraph.QtCore.QObject`) mainwidget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="c1">#: (:obj:`bool`) enabled flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`float`) minimum refresh time in s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshtime</span> <span class="o">=</span> <span class="mf">0.02</span>

<div class="viewcode-block" id="DisplayExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="DisplayExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes subwidget</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="DisplayExtension.setRefreshTime"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.setRefreshTime">[docs]</a>    <span class="k">def</span> <span class="nf">setRefreshTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refreshtime</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets refresh time</span>

<span class="sd">        :param refreshtime: refresh time in seconds</span>
<span class="sd">        :type refreshtime: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshtime</span> <span class="o">=</span> <span class="n">refreshtime</span></div>

<div class="viewcode-block" id="DisplayExtension.refreshTime"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.refreshTime">[docs]</a>    <span class="k">def</span> <span class="nf">refreshTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides refresh time</span>

<span class="sd">        :returns: refresh time in seconds</span>
<span class="sd">        :rtype: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refreshtime</span></div>

<div class="viewcode-block" id="DisplayExtension.enabled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.enabled">[docs]</a>    <span class="k">def</span> <span class="nf">enabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; is extension enabled</span>

<span class="sd">        :returns: is extension enabled</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span></div>

<div class="viewcode-block" id="DisplayExtension.coordinates"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="DisplayExtension.mouse_position"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.mouse_position">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="DisplayExtension.mouse_doubleclick"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.mouse_doubleclick">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_doubleclick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">locked</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        :param locked: double click lock</span>
<span class="sd">        :type locked: bool</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="DisplayExtension.mouse_click"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.mouse_click">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="DisplayExtension.scalingLabel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.DisplayExtension.scalingLabel">[docs]</a>    <span class="k">def</span> <span class="nf">scalingLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling label</span>

<span class="sd">        :returns:  scaling label</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span></div></div>


<div class="viewcode-block" id="ROIExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension">[docs]</a><span class="k">class</span> <span class="nc">ROIExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) roi coordinate changed signal</span>
    <span class="n">roiCoordsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rois&quot;</span>

        <span class="c1">#: (:class:`pyqtgraph.QtCore.QSignalMapper`) current roi mapper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSignalMapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1">#: (:class:`pyqtgraph.QtCore.QSignalMapper`) roi region mapper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSignalMapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1">#: (:obj:`int`) current roi id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`list` &lt; [int, int, int, int] &gt; )</span>
        <span class="c1">#: x1,y1,x2,y2 rois coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">]]</span>
        <span class="c1">#: (:obj:`list` &lt; (int, int, int) &gt; ) list with roi colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#: (:obj:`list` &lt;:class:`pyqtgraph.graphicsItems.TextItem`&gt;)</span>
        <span class="c1">#:            list of roi widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#: (:obj:`list` &lt;:class:`pyqtgraph.graphicsItems.ROI`&gt;)</span>
        <span class="c1">#:            list of roi widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ROI</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addScaleHandle</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addScaleHandle</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">TextItem</span><span class="p">(</span><span class="s2">&quot;1.&quot;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setParentItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColors</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">mapped</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeROIRegion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">mapped</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_emitROICoordsChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigHoverEvent</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigRegionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>

<div class="viewcode-block" id="ROIExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">rois</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showROIs</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">rois</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">rois</span></div>

<div class="viewcode-block" id="ROIExtension.scalingLabel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.scalingLabel">[docs]</a>    <span class="k">def</span> <span class="nf">scalingLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling label</span>

<span class="sd">        :returns:  scaling label</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;intensity&quot;</span></div>

    <span class="k">def</span> <span class="nf">__addROI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds ROIs</span>

<span class="sd">        :param coords: roi coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                 &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">coords</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">pnt</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)</span>
            <span class="n">sz</span> <span class="o">=</span> <span class="mi">50</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">[</span><span class="n">pnt</span><span class="p">,</span> <span class="n">pnt</span><span class="p">,</span> <span class="n">pnt</span> <span class="o">+</span> <span class="n">sz</span><span class="p">,</span> <span class="n">pnt</span> <span class="o">+</span> <span class="n">sz</span><span class="p">]</span>
            <span class="n">spnt</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">sz</span><span class="p">,</span> <span class="n">sz</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">pnt</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">spnt</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pnt</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">spnt</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ROI</span><span class="p">(</span><span class="n">pnt</span><span class="p">,</span> <span class="n">spnt</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">addScaleHandle</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">addScaleHandle</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">TextItem</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">),</span> <span class="n">anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setParentItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColors</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__removeROI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes the last roi</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">roi</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="n">roitext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">roitext</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getROI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get the given or the last ROI</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">rid</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__showROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides rois</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">roi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">:</span>
                <span class="n">roi</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">roi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">:</span>
                <span class="n">roi</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__addROICoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds ROI coorinates</span>

<span class="sd">        :param coords: roi coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">coords</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">crd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                             <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>

    <span class="k">def</span> <span class="nf">__calcROIsum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;calculates the current roi sum</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        :returns: sum roi value, roi id</span>
<span class="sd">        :rtype: (float, int)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rid</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">rawData</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">image</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rid</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">roicoords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                            <span class="n">rcrds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">roicoords</span><span class="p">[</span><span class="n">rid</span><span class="p">])</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">rangeWindowEnabled</span><span class="p">():</span>
                                <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">descaledxy</span><span class="p">(</span>
                                    <span class="n">rcrds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rcrds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">tx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">descaledxy</span><span class="p">(</span>
                                        <span class="n">rcrds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">rcrds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                    <span class="n">rcrds</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">rc</span> <span class="o">=</span> <span class="n">roicoords</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span>
                            <span class="n">rcrds</span> <span class="o">=</span> <span class="p">[</span><span class="n">rc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">rc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">rc</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">rangeWindowEnabled</span><span class="p">():</span>
                                <span class="n">ty</span><span class="p">,</span> <span class="n">tx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">descaledxy</span><span class="p">(</span>
                                    <span class="n">rcrds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">rcrds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">ty</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">ty2</span><span class="p">,</span> <span class="n">tx2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">descaledxy</span><span class="p">(</span>
                                        <span class="n">rcrds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">rcrds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                    <span class="n">rcrds</span> <span class="o">=</span> <span class="p">[</span><span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">]</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                                <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="k">elif</span> <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">i</span> <span class="o">//</span> <span class="mi">2</span><span class="p">:</span>
                                <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">i</span> <span class="o">//</span> <span class="mi">2</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                                <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">elif</span> <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">:</span>
                                <span class="n">rcrds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
                        <span class="n">roival</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nansum</span><span class="p">(</span><span class="n">image</span><span class="p">[</span>
                            <span class="nb">int</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">0</span><span class="p">]):(</span><span class="nb">int</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                            <span class="nb">int</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">1</span><span class="p">]):(</span><span class="nb">int</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                        <span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">roival</span> <span class="o">=</span> <span class="mf">0.</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">roival</span> <span class="o">=</span> <span class="mf">0.</span>
                <span class="k">return</span> <span class="n">roival</span><span class="p">,</span> <span class="n">rid</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">rid</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

<div class="viewcode-block" id="ROIExtension.calcROIsum"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.calcROIsum">[docs]</a>    <span class="k">def</span> <span class="nf">calcROIsum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;calculates the current roi sum</span>

<span class="sd">        :returns: sum roi value, roi id</span>
<span class="sd">        :rtype: (float, int)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__calcROIsum</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="ROIExtension.calcROIsums"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.calcROIsums">[docs]</a>    <span class="k">def</span> <span class="nf">calcROIsums</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; calculates all roi sums</span>

<span class="sd">        :returns: sum roi value, roi id</span>
<span class="sd">        :rtype: :obj:list &lt; float &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">rawData</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__calcROIsum</span><span class="p">(</span><span class="n">rid</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">rid</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">))]</span></div>

<div class="viewcode-block" id="ROIExtension.changeROIRegion"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.changeROIRegion">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">changeROIRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes the current roi region</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">state</span>
                <span class="n">rcrds</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span>
                    <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">(),</span>
                    <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">+</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span>
                    <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">+</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">()]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">ptx1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">pty1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">ptx2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                    <span class="n">pty2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pty1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">ptx1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">pty2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                    <span class="n">ptx2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">rcrds</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
                <span class="n">crd</span> <span class="o">=</span> <span class="p">[</span><span class="n">ptx1</span><span class="p">,</span> <span class="n">pty1</span><span class="p">,</span> <span class="n">ptx2</span><span class="p">,</span> <span class="n">pty2</span><span class="p">]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span> <span class="o">!=</span> <span class="n">crd</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span> <span class="o">=</span> <span class="n">crd</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">roiCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>
            <span class="c1"># print(&quot;Warning: %s&quot; % str(e))</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_emitROICoordsChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; emits roiCoordsChanged signal</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oldrid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
        <span class="k">if</span> <span class="n">rid</span> <span class="o">!=</span> <span class="n">oldrid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="n">rid</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roiCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

<div class="viewcode-block" id="ROIExtension.updateROIs"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.updateROIs">[docs]</a>    <span class="k">def</span> <span class="nf">updateROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update ROIs</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        :param coords: roi coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                 &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__addROICoords</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">rid</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">coords</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addROI</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addROI</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigHoverEvent</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigRegionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rid</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">&gt;=</span> <span class="n">rid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__removeROI</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__showROIs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span><span class="p">)</span></div>

<div class="viewcode-block" id="ROIExtension.setColors"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.setColors">[docs]</a>    <span class="k">def</span> <span class="nf">setColors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets colors</span>

<span class="sd">        :param colors: json list of roi colors</span>
<span class="sd">        :type colors: :obj:`str`</span>
<span class="sd">        :returns: change status</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">force</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">cl</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cl</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cl</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">clit</span> <span class="ow">in</span> <span class="n">cl</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">clit</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                        <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span>
            <span class="n">force</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="o">!=</span> <span class="n">colors</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="o">=</span> <span class="n">colors</span>
            <span class="n">defpen</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">it</span><span class="p">,</span> <span class="n">roi</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">):</span>
                <span class="n">clr</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">it</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)])</span> <span class="k">if</span> <span class="n">colors</span> <span class="k">else</span> <span class="n">defpen</span>
                <span class="n">roi</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">clr</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="p">[</span><span class="n">it</span><span class="p">],</span> <span class="s2">&quot;setColor&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">clr</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">mkColor</span><span class="p">(</span><span class="n">clr</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">textItem</span><span class="o">.</span><span class="n">setDefaultTextColor</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="o">.</span><span class="n">color</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="ROIExtension.roiCoords"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.roiCoords">[docs]</a>    <span class="k">def</span> <span class="nf">roiCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides rois coordinates</span>

<span class="sd">        :return: rois coordinates</span>
<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">               &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span></div>

<div class="viewcode-block" id="ROIExtension.isROIsEnabled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.isROIsEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isROIsEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides flag rois enabled</span>

<span class="sd">        :return: roi enabled flag</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span></div>

<div class="viewcode-block" id="ROIExtension.currentROI"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.currentROI">[docs]</a>    <span class="k">def</span> <span class="nf">currentROI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides current roi id</span>

<span class="sd">        :return: roi id</span>
<span class="sd">        :rtype: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span></div>

<div class="viewcode-block" id="ROIExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.ROIExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes ROIs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">crd</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">crd</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">crd</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
            <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
            <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">([</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span></div></div>


<div class="viewcode-block" id="CutExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension">[docs]</a><span class="k">class</span> <span class="nc">CutExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) cut coordinate changed signal</span>
    <span class="n">cutCoordsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;cuts&quot;</span>

        <span class="c1">#: (:class:`pyqtgraph.QtCore.QSignalMapper`) current cut mapper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSignalMapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1">#: (:class:`pyqtgraph.QtCore.QSignalMapper`) cut region mapper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cutregionmapper</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSignalMapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1">#: (:obj:`int`) current cut id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`list` &lt; [int, int, int, int] &gt; )</span>
        <span class="c1">#: x1,y1,x2,y2, width rois coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.00001</span><span class="p">]]</span>

        <span class="c1">#: (:obj:`list` &lt;:class:`pyqtgraph.graphicsItems.ROI`&gt;)</span>
        <span class="c1">#:        list of cut widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SimpleLineROI</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">pen</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__cutregionmapper</span><span class="o">.</span><span class="n">mapped</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeCutRegion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">mapped</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_emitCutCoordsChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">sigHoverEvent</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">sigRegionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__cutregionmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle1</span><span class="o">.</span><span class="n">hovered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle2</span><span class="o">.</span><span class="n">hovered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">vhandle</span><span class="o">.</span><span class="n">hovered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">vhandle</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cutregionmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>

<div class="viewcode-block" id="CutExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">cuts</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showCuts</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">cuts</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">cuts</span></div>

    <span class="k">def</span> <span class="nf">__addCutCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds Cut coordinates</span>

<span class="sd">        :param coords: cut coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                  &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">coords</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">crd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                             <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>

    <span class="k">def</span> <span class="nf">__addCut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds Cuts</span>

<span class="sd">        :param coords: cut coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                  &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">coords</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coords</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">pnt</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">sz</span> <span class="o">=</span> <span class="mi">50</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">[</span><span class="n">pnt</span><span class="p">,</span> <span class="n">pnt</span><span class="p">,</span> <span class="n">pnt</span> <span class="o">+</span> <span class="n">sz</span><span class="p">,</span> <span class="n">pnt</span><span class="p">,</span> <span class="mf">0.00001</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SimpleLineROI</span><span class="p">(</span>
                <span class="n">coords</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="n">coords</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">pen</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">SimpleLineROI</span><span class="p">(</span>
                <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
                <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
                <span class="n">width</span><span class="o">=</span><span class="n">coords</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">pen</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__removeCut</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes the last cut</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cut</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">cut</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">cut</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getCut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get the given or the last Cut</span>

<span class="sd">        :param cid: roi id</span>
<span class="sd">        :type cid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">cid</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__showCuts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides cuts</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cut</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">:</span>
                <span class="n">cut</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cut</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">:</span>
                <span class="n">cut</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="CutExtension.cutData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.cutData">[docs]</a>    <span class="k">def</span> <span class="nf">cutData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the current cut data</span>

<span class="sd">        :param cid: cut id</span>
<span class="sd">        :type cid: :obj:`int`</span>
<span class="sd">        :returns: current cut data</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">cid</span><span class="p">:</span>
            <span class="n">cut</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">rawData</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="n">cut</span><span class="o">.</span><span class="n">getArrayRegion</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">rawData</span><span class="p">(),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">image</span><span class="p">(),</span>
                    <span class="n">axes</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
                <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span>
                        <span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;Mean of empty slice&#39;</span><span class="p">)</span>
                    <span class="k">while</span> <span class="n">dt</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">dt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">dt</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CutExtension.cutCoords"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.cutCoords">[docs]</a>    <span class="k">def</span> <span class="nf">cutCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides cuts coordinates</span>

<span class="sd">        :return: cuts coordinates</span>
<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">               &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span></div>

<div class="viewcode-block" id="CutExtension.changeCutRegion"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.changeCutRegion">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">changeCutRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes the current roi region</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
            <span class="n">crds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span><span class="o">.</span><span class="n">getCoordinates</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="n">crds</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">cid</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">4</span><span class="p">]]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">cutCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>
            <span class="c1"># print(&quot;Warning: %s&quot; % str(e))</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_emitCutCoordsChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; emits cutCoordsChanged signal</span>

<span class="sd">        :param cid: cut id</span>
<span class="sd">        :type cid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oldcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="o">!=</span> <span class="n">oldcid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="n">cid</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cutCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

<div class="viewcode-block" id="CutExtension.updateCuts"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.updateCuts">[docs]</a>    <span class="k">def</span> <span class="nf">updateCuts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Cuts</span>

<span class="sd">        :param cid: cut id</span>
<span class="sd">        :type cid: :obj:`int`</span>
<span class="sd">        :param coords: cut coordinates</span>
<span class="sd">        :type coords: :obj:`list` &lt; [float, float, float, float] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__addCutCoords</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">cid</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">coords</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addCut</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addCut</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">sigHoverEvent</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">sigRegionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cutregionmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle1</span><span class="o">.</span><span class="n">hovered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle2</span><span class="o">.</span><span class="n">hovered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">vhandle</span><span class="o">.</span><span class="n">hovered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">vhandle</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__cutregionmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">&gt;=</span> <span class="n">cid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">max</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentcutmapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">()</span><span class="o">.</span><span class="n">handle2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__cutregionmapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getCut</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__removeCut</span><span class="p">()</span></div>

<div class="viewcode-block" id="CutExtension.isCutsEnabled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.isCutsEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isCutsEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides flag cuts enabled</span>

<span class="sd">        :return: cut enabled flag</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span></div>

<div class="viewcode-block" id="CutExtension.currentCut"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.currentCut">[docs]</a>    <span class="k">def</span> <span class="nf">currentCut</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides current cut id</span>

<span class="sd">        :return: cut id</span>
<span class="sd">        :rtype: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span></div>

<div class="viewcode-block" id="CutExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CutExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes Cuts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">crd</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cut</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">crd</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">crd</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">crd</span><span class="o">.</span><span class="n">angle</span><span class="p">()</span>
            <span class="n">ra</span> <span class="o">=</span> <span class="n">angle</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">180.</span>
            <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span>
                <span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">*</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                 <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">ra</span><span class="p">)</span> <span class="o">*</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
            <span class="n">crd</span><span class="o">.</span><span class="n">setAngle</span><span class="p">(</span><span class="mi">270</span><span class="o">-</span><span class="n">angle</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MeshExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension">[docs]</a><span class="k">class</span> <span class="nc">MeshExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) roi coordinate changed signal</span>
    <span class="n">roiCoordsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;mesh&quot;</span>

        <span class="c1">#: (:class:`pyqtgraph.QtCore.QSignalMapper`) current roi mapper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSignalMapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1">#: (:class:`pyqtgraph.QtCore.QSignalMapper`) roi region mapper</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSignalMapper</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1">#: (:obj:`int`) current roi id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`list` &lt; [int, int, int, int] &gt; )</span>
        <span class="c1">#: x1,y1,x2,y2 rois coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">]]</span>
        <span class="c1">#: (:obj:`list` &lt; (int, int, int) &gt; ) list with roi colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#: (:obj:`list` &lt;:class:`pyqtgraph.graphicsItems.TextItem`&gt;)</span>
        <span class="c1">#:            list of roi widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#: (:obj:`list` &lt;:class:`pyqtgraph.graphicsItems.ROI`&gt;)</span>
        <span class="c1">#:            list of roi widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ROI</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">_pg</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addScaleHandle</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">addScaleHandle</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">TextItem</span><span class="p">(</span><span class="s2">&quot;1.&quot;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">text</span><span class="o">.</span><span class="n">setParentItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roitext</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">mapped</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changeROIRegion</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">mapped</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_emitROICoordsChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigHoverEvent</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigRegionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>

<div class="viewcode-block" id="MeshExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">mesh</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showROIs</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">mesh</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">mesh</span></div>

<div class="viewcode-block" id="MeshExtension.scalingLabel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.scalingLabel">[docs]</a>    <span class="k">def</span> <span class="nf">scalingLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling label</span>

<span class="sd">        :returns:  scaling label</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;intensity&quot;</span></div>

    <span class="k">def</span> <span class="nf">_getROI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get the given or the last ROI</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">rid</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__showROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides rois</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">roi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">:</span>
                <span class="n">roi</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">roi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">:</span>
                <span class="n">roi</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__addROICoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds ROI coorinates</span>

<span class="sd">        :param coords: roi coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">coords</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">crd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                             <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>
                        <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                             <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>

<div class="viewcode-block" id="MeshExtension.changeROIRegion"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.changeROIRegion">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">changeROIRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes the current roi region</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">state</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">state</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">ptx</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
                    <span class="n">pty</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
                    <span class="n">szx</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
                    <span class="n">szy</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pty</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
                    <span class="n">ptx</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
                    <span class="n">szy</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
                    <span class="n">szx</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
                <span class="n">crd</span> <span class="o">=</span> <span class="p">[</span><span class="n">ptx</span><span class="p">,</span> <span class="n">pty</span><span class="p">,</span> <span class="n">ptx</span> <span class="o">+</span> <span class="n">szx</span><span class="p">,</span> <span class="n">pty</span> <span class="o">+</span> <span class="n">szy</span><span class="p">]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span> <span class="o">!=</span> <span class="n">crd</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span> <span class="o">=</span> <span class="n">crd</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">roiCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>
            <span class="c1"># print(&quot;Warning: %s&quot; % str(e))</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_emitROICoordsChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; emits roiCoordsChanged signal</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oldrid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span>
        <span class="k">if</span> <span class="n">rid</span> <span class="o">!=</span> <span class="n">oldrid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="n">rid</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roiCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

<div class="viewcode-block" id="MeshExtension.updateROIs"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.updateROIs">[docs]</a>    <span class="k">def</span> <span class="nf">updateROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update ROIs</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        :param coords: roi coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                 &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__addROICoords</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">rid</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">coords</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addROI</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addROI</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigHoverEvent</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">()</span><span class="o">.</span><span class="n">sigRegionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">setMapping</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rid</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">&gt;=</span> <span class="n">rid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currentroimapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__roiregionmapper</span><span class="o">.</span><span class="n">removeMappings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getROI</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__removeROI</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__showROIs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span><span class="p">)</span></div>

<div class="viewcode-block" id="MeshExtension.roiCoords"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.roiCoords">[docs]</a>    <span class="k">def</span> <span class="nf">roiCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides rois coordinates</span>

<span class="sd">        :return: rois coordinates</span>
<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">               &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coords</span></div>

<div class="viewcode-block" id="MeshExtension.isROIsEnabled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.isROIsEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isROIsEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides flag rois enabled</span>

<span class="sd">        :return: roi enabled flag</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span></div>

<div class="viewcode-block" id="MeshExtension.currentROI"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.currentROI">[docs]</a>    <span class="k">def</span> <span class="nf">currentROI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides current roi id</span>

<span class="sd">        :return: roi id</span>
<span class="sd">        :rtype: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span></div>

<div class="viewcode-block" id="MeshExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MeshExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes ROIs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">crd</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roi</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">crd</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">crd</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
            <span class="n">crd</span><span class="o">.</span><span class="n">setPos</span><span class="p">([</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
            <span class="n">crd</span><span class="o">.</span><span class="n">setSize</span><span class="p">([</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span></div></div>


<div class="viewcode-block" id="RegionsExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension">[docs]</a><span class="k">class</span> <span class="nc">RegionsExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) region points changed signal</span>
    <span class="n">regionPointsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;regions&quot;</span>

        <span class="c1">#: (:obj:`int`) current roi id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`list` &lt; [int, int, int, int] &gt; )</span>
        <span class="c1">#: x1,y1,x2,y2 regions coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__points</span> <span class="o">=</span> <span class="p">[[[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]]]</span>
        <span class="c1">#: (:obj:`list` &lt; (int, int, int) &gt; ) list with region colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#: ( (:obj:`int`, :obj:`int&#39;, :obj:`int`)) default pen color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__defpen</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">127</span><span class="p">)</span>
        <span class="c1">#: (:obj:`list` &lt;:class:`pyqtgraph.graphicsItems.TextItem`&gt;)</span>
        <span class="c1">#:            list of region widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__regiontext</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#: (:obj:`list` &lt;:class:`pyqtgraph.graphicsItems.ROI`&gt;)</span>
        <span class="c1">#:            list of region widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__region</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">RegionItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                        <span class="n">pen</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="s1">&#39;#00ff7f&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)))</span>
        <span class="c1"># text = _pg.TextItem(&quot;1.&quot;, anchor=(1, 1))</span>
        <span class="c1"># text.setParentItem(self.__region[0])</span>
        <span class="c1"># self.__regiontext.append(text)</span>
        <span class="c1"># clr = &#39;#00ff7f&#39;</span>
        <span class="c1"># if hasattr(self.__regiontext[0], &quot;setColor&quot;):</span>
        <span class="c1">#     self.__regiontext[0].setColor(clr)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     self.__regiontext[0].color = _pg.functions.mkColor(clr)</span>
        <span class="c1">#     self.__regiontext[0].textItem.setDefaultTextColor(</span>
        <span class="c1">#         self.__regiontext[it].color)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColors</span><span class="p">()</span>

<div class="viewcode-block" id="RegionsExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">regions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showRegions</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">regions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">regions</span></div>

<div class="viewcode-block" id="RegionsExtension.scalingLabel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.scalingLabel">[docs]</a>    <span class="k">def</span> <span class="nf">scalingLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling label</span>

<span class="sd">        :returns:  scaling label</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;intensity&quot;</span></div>

    <span class="k">def</span> <span class="nf">__addRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rid</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds Regions</span>

<span class="sd">        :param points: region coordinates</span>
<span class="sd">        :type points: :obj:`list`</span>
<span class="sd">                 &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">points</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">points</span> <span class="o">=</span> <span class="p">[[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">points</span> <span class="o">=</span> <span class="p">[[(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pt</span><span class="p">]</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
        <span class="n">clr</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__colors</span><span class="p">[</span><span class="n">rid</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__colors</span><span class="p">)])</span> \
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__defpen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">RegionItem</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="n">clr</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)))</span>
        <span class="c1"># text = _pg.TextItem(&quot;%s.&quot; % len(self.__region), anchor=(1, 1))</span>
        <span class="c1"># text.setParentItem(self.__region[-1])</span>
        <span class="c1"># self.__regiontext.append(text)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
        <span class="c1"># self.setColors()</span>

    <span class="k">def</span> <span class="nf">__removeRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes the last region</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">region</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">region</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="c1"># regiontext = self.__regiontext.pop()</span>
        <span class="c1"># regiontext.hide()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__points</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get the given or the last region</span>

<span class="sd">        :param rid: region id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__region</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">rid</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__showRegions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides regions</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">rng</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">:</span>
                <span class="n">rng</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">rng</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">:</span>
                <span class="n">rng</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__addRegionPoints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds region coorinates</span>

<span class="sd">        :param points: region coordinates</span>
<span class="sd">        :type points: :obj:`list`</span>
<span class="sd">                &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">points</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">crd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">pnts</span> <span class="o">=</span> <span class="p">[[(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pt</span><span class="p">]</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pnts</span> <span class="o">=</span> <span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">crd</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">pnts</span><span class="p">)</span>

<div class="viewcode-block" id="RegionsExtension.updateRegions"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.updateRegions">[docs]</a>    <span class="k">def</span> <span class="nf">updateRegions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">rid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Regions</span>

<span class="sd">        :param rid: rng id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        :param points: rng coordinates</span>
<span class="sd">        :type points: :obj:`list` &lt;  :obj:`list` &lt;  :obj:`list`</span>
<span class="sd">                  &lt; (:obj:`float`, :obj:`float`) &gt; &gt; &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">points</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__addRegionPoints</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">rid</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">points</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addRegion</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">)],</span>
                                 <span class="n">rid</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__addRegion</span><span class="p">(</span><span class="n">rid</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">rid</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">&gt;=</span> <span class="n">rid</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__current</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getRegion</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__removeRegion</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__showRegions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span><span class="p">)</span></div>

<div class="viewcode-block" id="RegionsExtension.setColors"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.setColors">[docs]</a>    <span class="k">def</span> <span class="nf">setColors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets colors</span>

<span class="sd">        :param colors: json list of roi colors</span>
<span class="sd">        :type colors: :obj:`str`</span>
<span class="sd">        :returns: change status</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">force</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">cl</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cl</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cl</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">clit</span> <span class="ow">in</span> <span class="n">cl</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">clit</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                        <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span>
            <span class="n">force</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="o">!=</span> <span class="n">colors</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__colors</span> <span class="o">=</span> <span class="n">colors</span>
            <span class="k">for</span> <span class="n">it</span><span class="p">,</span> <span class="n">rg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">):</span>
                <span class="n">clr</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">it</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)])</span> <span class="k">if</span> <span class="n">colors</span> \
                    <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__defpen</span>
                <span class="n">rg</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="n">clr</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
                <span class="c1"># if hasattr(self.__regiontext[it], &quot;setColor&quot;):</span>
                <span class="c1">#     self.__regiontext[it].setColor(clr)</span>
                <span class="c1"># else:</span>
                <span class="c1">#     self.__regiontext[it].color = _pg.functions.mkColor(clr)</span>
                <span class="c1">#     self.__regiontext[it].textItem.setDefaultTextColor(</span>
                <span class="c1">#         self.__regiontext[it].color)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="RegionsExtension.regionPoints"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.regionPoints">[docs]</a>    <span class="k">def</span> <span class="nf">regionPoints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides region coordinates</span>

<span class="sd">        :return: region coordinates</span>
<span class="sd">        :rtype: :obj:`list` &lt;  :obj:`list` &lt;  :obj:`list`</span>
<span class="sd">                  &lt; (:obj:`float`, :obj:`float`) &gt; &gt; &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__points</span></div>

<div class="viewcode-block" id="RegionsExtension.isRegionEnabled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.isRegionEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">isRegionEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides flag regions enabled</span>

<span class="sd">        :return: region enabled flag</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span></div>

<div class="viewcode-block" id="RegionsExtension.currentRegion"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.currentRegion">[docs]</a>    <span class="k">def</span> <span class="nf">currentRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides current region id</span>

<span class="sd">        :return: region id</span>
<span class="sd">        :rtype: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__current</span></div>

<div class="viewcode-block" id="RegionsExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.RegionsExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes Regions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">crd</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__region</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__points</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">pnts</span> <span class="o">=</span> <span class="p">[[(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pt</span><span class="p">]</span>
                            <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__points</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pnts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">crd</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">pnts</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="LockerExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.LockerExtension">[docs]</a><span class="k">class</span> <span class="nc">LockerExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;locker&quot;</span>
        <span class="c1">#: (:obj:`bool`) crooshair locked flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__crosshairlocked</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: ([:obj:`float`, :obj:`float`]) position mark coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lockercoordinates</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`float`) last time in s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lasttime</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                 vertical locker line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                   horizontal locker line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="LockerExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.LockerExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">crosshairlocker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showLockerLines</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">crosshairlocker</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">crosshairlocker</span></div>

<div class="viewcode-block" id="LockerExtension.coordinates"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.LockerExtension.coordinates">[docs]</a>    <span class="k">def</span> <span class="nf">coordinates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xfdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">yfdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crosshairlocked</span><span class="p">:</span>
            <span class="n">xfdata</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lockercoordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">yfdata</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__lockercoordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">xfdata</span><span class="p">,</span> <span class="n">yfdata</span></div>

    <span class="k">def</span> <span class="nf">__showLockerLines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides HV locker mouse lines</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="LockerExtension.mouse_position"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.LockerExtension.mouse_position">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crosshairlocked</span><span class="p">:</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">now</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lasttime</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refreshtime</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lasttime</span> <span class="o">=</span> <span class="n">now</span>
                <span class="n">pos0</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">scale0</span><span class="p">,</span> <span class="n">scale1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">scale</span><span class="p">()</span>
                <span class="n">fx</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">fy</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pos0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">fx</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">fy</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">fy</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">fx</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">fx</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">fy</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">fy</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">fx</span> <span class="o">+</span> <span class="o">.</span><span class="mi">5</span><span class="p">)</span></div>

<div class="viewcode-block" id="LockerExtension.mouse_doubleclick"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.LockerExtension.mouse_doubleclick">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_doubleclick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">locked</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        :param locked: double click lock</span>
<span class="sd">        :type locked: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateLocker</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="LockerExtension.updateLocker"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.LockerExtension.updateLocker">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateLocker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the locker position</span>

<span class="sd">        :param xdata: x pixel position</span>
<span class="sd">        :type xdata: :obj:`float`</span>
<span class="sd">        :param ydata: y-pixel position</span>
<span class="sd">        :type ydata: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__crosshairlocked</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crosshairlocked</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__crosshairlocked</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lockercoordinates</span> <span class="o">=</span> <span class="p">[</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">]</span></div>

<div class="viewcode-block" id="LockerExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.LockerExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes locker lines</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">getPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">getPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lockerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">h</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CenterExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CenterExtension">[docs]</a><span class="k">class</span> <span class="nc">CenterExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;center&quot;</span>

        <span class="c1">#: ([:obj:`float`, :obj:`float`]) center coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centercoordinates</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`float`) last time in s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lasttime</span> <span class="o">=</span> <span class="mf">0.</span>

        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                 vertical center line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                   horizontal center line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="CenterExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CenterExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">centerlines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showCenterLines</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">centerlines</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">centerlines</span></div>

    <span class="k">def</span> <span class="nf">__showCenterLines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides HV center mouse lines</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="CenterExtension.mouse_position"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CenterExtension.mouse_position">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__centercoordinates</span><span class="p">:</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">now</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lasttime</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refreshtime</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lasttime</span> <span class="o">=</span> <span class="n">now</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="CenterExtension.mouse_doubleclick"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CenterExtension.mouse_doubleclick">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_doubleclick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">locked</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        :param locked: double click lock</span>
<span class="sd">        :type locked: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateCenter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="CenterExtension.updateCenter"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CenterExtension.updateCenter">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the image center</span>

<span class="sd">        :param xdata: x pixel position</span>
<span class="sd">        :type xdata: :obj:`float`</span>
<span class="sd">        :param ydata: y-pixel position</span>
<span class="sd">        :type ydata: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centercoordinates</span> <span class="o">=</span> <span class="p">[</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">]</span>
        <span class="n">pos0</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">scale0</span><span class="p">,</span> <span class="n">scale1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">useraxes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pos0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">xdata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">ydata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">ydata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">xdata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span></div>

<div class="viewcode-block" id="CenterExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.CenterExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes Center lines</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">getPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">getPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">h</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="VHBoundsExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.VHBoundsExtension">[docs]</a><span class="k">class</span> <span class="nc">VHBoundsExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;vhbounds&quot;</span>

        <span class="c1">#: ([:obj:`float`, :obj:`float`]) vertical bound coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__vbounds</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: ([:obj:`float`, :obj:`float`]) horizontal bound coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__hbounds</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                 first vertical center line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine1</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                 second vertical center line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine2</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:          first horizontal center line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine1</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:          second horizontal center line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine2</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine1</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine2</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine1</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine2</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="VHBoundsExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.VHBoundsExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">vhbounds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showBounds</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">vhbounds</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">vhbounds</span></div>

    <span class="k">def</span> <span class="nf">__showBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides HV center mouse lines</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine2</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine2</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine1</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine1</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine2</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine2</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="VHBoundsExtension.updateVBounds"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.VHBoundsExtension.updateVBounds">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateVBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata1</span><span class="p">,</span> <span class="n">xdata2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the vertical bounds</span>

<span class="sd">        :param xdata1: first x-pixel position</span>
<span class="sd">        :type xdata1: :obj:`float`</span>
<span class="sd">        :param xdata2: second x-pixel position</span>
<span class="sd">        :type xdata2: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__vbounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">xdata1</span><span class="p">,</span> <span class="n">xdata2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">xdata1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine1</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine1</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">xdata2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine2</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine2</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerVLine2</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

<div class="viewcode-block" id="VHBoundsExtension.updateHBounds"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.VHBoundsExtension.updateHBounds">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateHBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ydata1</span><span class="p">,</span> <span class="n">ydata2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the horizontal bounds</span>

<span class="sd">        :param ydata1: first y-pixel position</span>
<span class="sd">        :type ydata1: :obj:`float`</span>
<span class="sd">        :param ydata2: second y-pixel position</span>
<span class="sd">        :type ydata2: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__hbounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">ydata1</span><span class="p">,</span> <span class="n">ydata2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ydata1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine1</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine1</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ydata2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine2</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine2</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__centerHLine2</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="BaseMarkExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.BaseMarkExtension">[docs]</a><span class="k">class</span> <span class="nc">BaseMarkExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; base mark extension &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;basemark&quot;</span>

        <span class="c1">#: ([:obj:`float`, :obj:`float`]) position mark coordinates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markcoordinates</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`float`) last time in s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lasttime</span> <span class="o">=</span> <span class="mf">0.</span>

        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                 vertical mark line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="c1">#: (:class:`pyqtgraph.InfiniteLine`)</span>
        <span class="c1">#:                   horizontal mark line of the mouse position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">InfiniteLine</span><span class="p">(</span>
            <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">movable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="p">,</span> <span class="n">ignoreBounds</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_showMarkLines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides HV mark mouse lines</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="BaseMarkExtension.updatePositionMark"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.BaseMarkExtension.updatePositionMark">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updatePositionMark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">,</span> <span class="n">scaled</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the position mark</span>

<span class="sd">        :param xdata: x pixel position</span>
<span class="sd">        :type xdata: :obj:`float`</span>
<span class="sd">        :param ydata: y-pixel position</span>
<span class="sd">        :type ydata: :obj:`float`</span>
<span class="sd">        :param scaled: scaled flag</span>
<span class="sd">        :type scaled: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markcoordinates</span> <span class="o">=</span> <span class="p">[</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">]</span>
        <span class="n">pos0</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">scale0</span><span class="p">,</span> <span class="n">scale1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">scale</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">pos0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">scaled</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">xdata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">ydata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">ydata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">xdata</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span></div>

<div class="viewcode-block" id="BaseMarkExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.BaseMarkExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes Mark Position lines</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">getPos</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">getPos</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">h</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MarkExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MarkExtension">[docs]</a><span class="k">class</span> <span class="nc">MarkExtension</span><span class="p">(</span><span class="n">BaseMarkExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BaseMarkExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;mark&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPen</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPen</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>

<div class="viewcode-block" id="MarkExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MarkExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">marklines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_showMarkLines</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">marklines</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">marklines</span></div>

<div class="viewcode-block" id="MarkExtension.mouse_position"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MarkExtension.mouse_position">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_markcoordinates</span><span class="p">:</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">now</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lasttime</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refreshtime</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lasttime</span> <span class="o">=</span> <span class="n">now</span>
                <span class="n">pos0</span><span class="p">,</span> <span class="n">pos1</span><span class="p">,</span> <span class="n">scale0</span><span class="p">,</span> <span class="n">scale1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">scale</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">pos0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale1</span> <span class="o">+</span> <span class="n">pos1</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">scale0</span> <span class="o">+</span> <span class="n">pos0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="MarkExtension.mouse_doubleclick"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MarkExtension.mouse_doubleclick">[docs]</a>    <span class="k">def</span> <span class="nf">mouse_doubleclick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">locked</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  sets vLine and hLine positions</span>

<span class="sd">        :param x: x coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        :param locked: double click lock</span>
<span class="sd">        :type locked: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">locked</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updatePositionMark</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TrackingExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.TrackingExtension">[docs]</a><span class="k">class</span> <span class="nc">TrackingExtension</span><span class="p">(</span><span class="n">BaseMarkExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BaseMarkExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;tracking&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_markVLine</span><span class="o">.</span><span class="n">setPen</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_markHLine</span><span class="o">.</span><span class="n">setPen</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>

<div class="viewcode-block" id="TrackingExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.TrackingExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">trackinglines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_showMarkLines</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">trackinglines</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">trackinglines</span></div></div>


<div class="viewcode-block" id="MaximaExtension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MaximaExtension">[docs]</a><span class="k">class</span> <span class="nc">MaximaExtension</span><span class="p">(</span><span class="n">DisplayExtension</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">DisplayExtension</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`str`) tool name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;maxima&quot;</span>

        <span class="c1">#: (:obj:`list` &lt; &gt; ) maxima parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__positions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__maxplot</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">ScatterPlotItem</span><span class="p">(</span>
            <span class="n">size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="n">_pg</span><span class="o">.</span><span class="n">mkPen</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mainwidget</span><span class="o">.</span><span class="n">viewbox</span><span class="p">()</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__maxplot</span><span class="p">)</span>

<div class="viewcode-block" id="MaximaExtension.show"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MaximaExtension.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">maxima</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__showMaxima</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">maxima</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">maxima</span></div>

    <span class="k">def</span> <span class="nf">__showMaxima</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows or hides maxima</span>

<span class="sd">        :param status: will be shown</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__maxplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__maxplot</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="MaximaExtension.setMaximaPos"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MaximaExtension.setMaximaPos">[docs]</a>    <span class="k">def</span> <span class="nf">setMaximaPos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positionlist</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        sets maxima postions</span>

<span class="sd">        :param positionlist: [(x1, y1), ... , (xn, yn)]</span>
<span class="sd">        :type positionlist: :obj:`list` &lt; (float, float) &gt;</span>
<span class="sd">        :param offset: offset of position</span>
<span class="sd">        :type offset: [ :obj:`float`, :obj:`float`]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__positions</span> <span class="o">=</span> <span class="n">positionlist</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">spots</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">j</span> <span class="o">+</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                  <span class="s1">&#39;brush&#39;</span><span class="p">:</span> <span class="n">_pg</span><span class="o">.</span><span class="n">mkBrush</span><span class="p">((</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">))}</span>
                 <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positions</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">spots</span><span class="p">:</span>
            <span class="n">spots</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;brush&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">mkBrush</span><span class="p">((</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maxplot</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maxplot</span><span class="o">.</span><span class="n">addPoints</span><span class="p">(</span><span class="n">spots</span><span class="p">)</span></div>

<div class="viewcode-block" id="MaximaExtension.transpose"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.displayExtensions.MaximaExtension.transpose">[docs]</a>    <span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes maxima</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">positionlist</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__positions</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMaximaPos</span><span class="p">(</span><span class="n">positionlist</span><span class="p">)</span></div></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">LaVue 2.83.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">lavuelib.displayExtensions</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017 DESY, Jan Kotanski &lt;jkotan@mail.desy.de&gt;, Christoph Rosemann &lt;christoph.rosemann@desy.de&gt; 

GNU GENERAL PUBLIC LICENSE, version 2.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>