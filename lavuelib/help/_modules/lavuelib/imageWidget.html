

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>lavuelib.imageWidget &#8212; LaVue (latest) documentation</title>
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">LaVue (latest) documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for lavuelib.imageWidget</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright (C) 2017  DESY, Christoph Rosemann, Notkestr. 85, D-22607 Hamburg</span>
<span class="c1">#</span>
<span class="c1"># lavue is an image viewing program for photon science imaging detectors.</span>
<span class="c1"># Its usual application is as a live viewer using hidra as data source.</span>
<span class="c1">#</span>
<span class="c1"># This program is free software; you can redistribute it and/or</span>
<span class="c1"># modify it under the terms of the GNU General Public License</span>
<span class="c1"># as published by the Free Software Foundation in  version 2</span>
<span class="c1"># of the License.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program; if not, write to the Free Software</span>
<span class="c1"># Foundation, Inc., 51 Franklin Street, Fifth Floor,</span>
<span class="c1"># Boston, MA  02110-1301, USA.</span>
<span class="c1">#</span>
<span class="c1"># Authors:</span>
<span class="c1">#     Christoph Rosemann &lt;christoph.rosemann@desy.de&gt;</span>
<span class="c1">#     Jan Kotanski &lt;jan.kotanski@desy.de&gt;</span>
<span class="c1">#</span>

<span class="sd">&quot;&quot;&quot; image widget &quot;&quot;&quot;</span>


<span class="kn">from</span> <span class="nn">.qtuic</span> <span class="k">import</span> <span class="n">uic</span>
<span class="kn">import</span> <span class="nn">pyqtgraph</span> <span class="k">as</span> <span class="nn">_pg</span>
<span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="k">import</span> <span class="n">QtCore</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="k">import</span> <span class="n">QtWidgets</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="k">import</span> <span class="n">QtGui</span> <span class="k">as</span> <span class="n">QtWidgets</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">imageDisplayWidget</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">displayExtensions</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">messageBox</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">imageSource</span> <span class="k">as</span> <span class="n">isr</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">toolWidget</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">memoExportDialog</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">sardanaUtils</span>
<span class="kn">from</span> <span class="nn">.sardanaUtils</span> <span class="k">import</span> <span class="n">debugmethod</span>

<span class="c1"># _VMAJOR, _VMINOR, _VPATCH = _pg.__version__.split(&quot;.&quot;) \</span>
<span class="c1">#     if _pg.__version__ else (&quot;0&quot;, &quot;9&quot;, &quot;0&quot;)</span>

<span class="n">_formclass</span><span class="p">,</span> <span class="n">_baseclass</span> <span class="o">=</span> <span class="n">uic</span><span class="o">.</span><span class="n">loadUiType</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span>
                 <span class="s2">&quot;ui&quot;</span><span class="p">,</span> <span class="s2">&quot;ImageWidget.ui&quot;</span><span class="p">))</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;lavue&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="ImageWidget"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget">[docs]</a><span class="k">class</span> <span class="nc">ImageWidget</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The part of the GUI that incorporates the image view.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) current tool changed signal</span>
    <span class="n">currentToolChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) roi number changed signal</span>
    <span class="n">roiNumberChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) roi coordinate changed signal</span>
    <span class="n">roiCoordsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) mesh coordinate changed signal</span>
    <span class="n">meshCoordsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) roi Line Edit changed signal</span>
    <span class="n">roiLineEditChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) roi aliases changed signal</span>
    <span class="n">roiAliasesChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) roi value changed signal</span>
    <span class="n">roiValueChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) cut number changed signal</span>
    <span class="n">cutNumberChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) cut coordinate changed signal</span>
    <span class="n">cutCoordsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) image plotted signal</span>
    <span class="n">imagePlotted</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) replot image signal</span>
    <span class="n">replotImage</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) sardana enabled signal</span>
    <span class="n">sardanaEnabled</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) aspect locked toggled signal</span>
    <span class="n">aspectLockedToggled</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) apply tips changed signal</span>
    <span class="n">applyTipsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`)</span>
    <span class="c1">#         mouse image position changed signal</span>
    <span class="n">mouseImagePositionChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) mouse double clicked</span>
    <span class="n">mouseImageDoubleClicked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) mouse single clicked</span>
    <span class="n">mouseImageSingleClicked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) geometry changed</span>
    <span class="n">geometryChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) freeze clicked signal</span>
    <span class="n">freezeBottomPlotClicked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) clear clicked signal</span>
    <span class="n">clearBottomPlotClicked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) scales changed signal</span>
    <span class="n">scalesChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) colors changed signal</span>
    <span class="n">colorsChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) tool configuration changed signal</span>
    <span class="n">toolConfigurationChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tooltypes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        :param tooltypes: tool class names</span>
<span class="sd">        :type tooltypes: :obj:`list` &lt;:obj:`str`&gt;</span>
<span class="sd">        :param settings: lavue configuration settings</span>
<span class="sd">        :type settings: :class:`lavuelib.settings.Settings`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

        <span class="c1">#: (:obj:`list` &lt; :obj:`str` &gt; ) tool class names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tooltypes</span> <span class="o">=</span> <span class="n">tooltypes</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="c1">#: (:obj:`list` &lt; :obj:`str` &gt; ) tool names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__toolnames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#: (:obj:`dict` &lt; :obj:`str`,</span>
        <span class="c1">#:      :class:`lavuelib.toolWidget.BaseToolWidget` &gt; )</span>
        <span class="c1">#:           tool names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__toolwidgets</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1">#: (:class:`pyqtgraph.QtCore.QMutex`) mutex lock for CB</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__mutex</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QMutex</span><span class="p">()</span>

        <span class="c1">#: (:class:`lavuelib.settings.Settings`) settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span> <span class="o">=</span> <span class="n">settings</span>
        <span class="c1">#: (:class:`lavuelib.controllerClient.ControllerClient`)</span>
        <span class="c1">#:   tango controller client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (obj`list`) collection of last writing rois</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lastrois</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#: (obj`list`) collection of last writing rois values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lastroisvalues</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#: (obj`list`) collection of last writing rois parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lastroisparams</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
        <span class="c1">#: (obj`str`) last text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__lasttext</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1">#: (obj`str`) roi labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">roilabels</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1">#: (:class:`lavuelib.toolWidget.BaseToolWidget`) current tool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: (:class:`numpy.ndarray`) data to displayed in 2d widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:class:`numpy.ndarray`) raw data to cut plots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`bool`) apply mask</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__applymask</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:class:`numpy.ndarray`) mask image indices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskindices</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:class:`numpy.ndarray`) mask image value indices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskvalueindices</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`float`) file name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskvalue</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:class:`numpy.ndarray`) overflow image value indices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__overflowvalueindices</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`float`) file name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__overflowvalue</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`str`) image name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__imagename</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: ( ( :obj:`bool`, :obj:`bool`,:obj:`bool`) )</span>
        <span class="c1">#        selected (transpose, leftright-flip, updown-flip )</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">#: (:class:`Ui_ImageWidget&#39;) ui_imagewidget object from qtdesigner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span> <span class="o">=</span> <span class="n">_formclass</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1">#: (:class:`lavuelib.imageDisplayWidget.ImageDisplayWidget`)</span>
        <span class="c1">#:     2D image display widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span> <span class="o">=</span> <span class="n">imageDisplayWidget</span><span class="o">.</span><span class="n">ImageDisplayWidget</span><span class="p">(</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">addExtensions</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">ROIExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">CutExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">LockerExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">CenterExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">MarkExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">TrackingExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">MeshExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">MaximaExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">VHBoundsExtension</span><span class="p">,</span>
                <span class="n">displayExtensions</span><span class="o">.</span><span class="n">RegionsExtension</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1">#: (:class:`pyqtgraph.PlotWidget`) bottom 1D plot widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span> <span class="o">=</span> <span class="n">memoExportDialog</span><span class="o">.</span><span class="n">MemoPlotWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">addLegend</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">plotItem</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">invertCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mouseCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">linkCombo</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">autoPanCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visibleOnlyCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mouseCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">linkCombo</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">autoPanCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">visibleOnlyCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="c1">#: (:class:`pyqtgraph.PlotWidget`) right 1D plot widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span> <span class="o">=</span> <span class="n">memoExportDialog</span><span class="o">.</span><span class="n">MemoPlotWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mouseCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">linkCombo</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">autoPanCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visibleOnlyCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">invertCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mouseCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">linkCombo</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">autoPanCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">visibleOnlyCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">twoDVerticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">oneDBottomVerticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">oneDRightHorizontalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="p">)</span>

        <span class="n">sizePolicy</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Preferred</span><span class="p">,</span>
                                           <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Preferred</span><span class="p">)</span>
        <span class="n">sizePolicy</span><span class="o">.</span><span class="n">setHorizontalStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">sizePolicy</span><span class="o">.</span><span class="n">setVerticalStretch</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
        <span class="n">sizePolicy</span><span class="o">.</span><span class="n">setHeightForWidth</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">sizePolicy</span><span class="p">()</span><span class="o">.</span><span class="n">hasHeightForWidth</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">sizePolicy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">upperPlotWidget</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">sizePolicy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">rgbtoolComboBox</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="c1"># if _VMAJOR == &#39;0&#39; and int(_VMINOR) &lt; 10 and int(_VPATCH) &lt; 9:</span>
        <span class="c1">#     self.__bottomplot.setMinimumSize(QtCore.QSize(0, 170))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__addToolWidgets</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">plotSplitter</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">plotSplitter</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolSplitter</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolSplitter</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;cuts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">cutCoordsChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emitCutCoordsChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showCurrentTool</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">aspectLockedToggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emitAspectLockedToggled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_emitMouseImagePositionChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">mouseImageDoubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_emitMouseImageDoubleClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">mouseImageSingleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_emitMouseImageSingleClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">freezeClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_emitFreezeBottomPlotClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">clearClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_emitClearBottomPlotClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__connectsplitters</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">roiLineEditChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

<div class="viewcode-block" id="ImageWidget.updateToolComboBox"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateToolComboBox">[docs]</a>    <span class="k">def</span> <span class="nf">updateToolComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolnames</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set tool by changing combobox</span>

<span class="sd">        :param toolnames: tool names</span>
<span class="sd">        :type toolnames: :obj:`list` &lt; :obj:`str` &gt;</span>
<span class="sd">        :param index: combobox index</span>
<span class="sd">        :type index: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">showCurrentTool</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">toolnames</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">toolnames</span><span class="p">:</span>
            <span class="n">toolnames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">toolnames</span><span class="p">)</span>
            <span class="n">toolnames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">toolnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">sr</span> <span class="k">for</span> <span class="n">sr</span> <span class="ow">in</span> <span class="n">toolnames</span> <span class="k">if</span> <span class="n">sr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolnames</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">toolnames</span><span class="p">:</span>
            <span class="n">toolnames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolnames</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="n">toolnames</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__toolnames</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showCurrentTool</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.writeAttribute"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.writeAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">writeAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; writes attribute value of device</span>

<span class="sd">        :param name: attribute name</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        :param value: attribute value</span>
<span class="sd">        :type value: :obj:`any`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.writeDetectorAttributes"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.writeDetectorAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">writeDetectorAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; write detector settings from ai object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="s2">&quot;BeamCenterX&quot;</span><span class="p">,</span>
                            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centerx</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="s2">&quot;BeamCenterY&quot;</span><span class="p">,</span>
                            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centery</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="s2">&quot;Energy&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">energy</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="s2">&quot;DetectorDistance&quot;</span><span class="p">,</span>
                            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">detdistance</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="s2">&quot;PixelSizeX&quot;</span><span class="p">,</span>
                            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">pixelsizex</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="s2">&quot;PixelSizeY&quot;</span><span class="p">,</span>
                            <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">pixelsizey</span><span class="p">))</span></div>

<div class="viewcode-block" id="ImageWidget.writeDetectorROIsAttribute"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.writeDetectorROIsAttribute">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">writeDetectorROIsAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; writes DetectorROIsattribute value of device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="p">:</span>
            <span class="n">rois</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">slabel</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;|,| |</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">roilabels</span><span class="p">))</span>
            <span class="n">slabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">lb</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="n">slabel</span> <span class="k">if</span> <span class="n">lb</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">slabel</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">slabel</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;__null__&quot;</span><span class="p">]</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">lastcrdlist</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">toadd</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">lastalias</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">roicoords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">roiCoords</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lastrois</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">roicoords</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">slabel</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">toadd</span><span class="p">:</span>
                    <span class="n">rois</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">lastcrdlist</span> <span class="o">=</span> <span class="n">rois</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">rid</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">roicoords</span><span class="p">):</span>
                    <span class="n">lastcrdlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">roicoords</span><span class="p">[</span><span class="n">rid</span><span class="p">])</span>
                    <span class="n">rid</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">toadd</span><span class="p">:</span>
                        <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lastcrdlist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">rois</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">rois</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                    <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="n">lastalias</span> <span class="o">=</span> <span class="n">alias</span>
            <span class="k">if</span> <span class="n">rid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">while</span> <span class="n">rid</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">roicoords</span><span class="p">):</span>
                    <span class="n">lastcrdlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">roicoords</span><span class="p">[</span><span class="n">rid</span><span class="p">])</span>
                    <span class="n">rid</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lastcrdlist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">lastalias</span> <span class="ow">in</span> <span class="n">rois</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">rois</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">lastalias</span><span class="p">)</span>
                    <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastalias</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rois</span><span class="p">))</span></div>

<div class="viewcode-block" id="ImageWidget.writeDetectorROIsValuesAttribute"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.writeDetectorROIsValuesAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">writeDetectorROIsValuesAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rvalues</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; writes DetectorROIsValuesattribute of device</span>

<span class="sd">        :param rvalues: list of roi values</span>
<span class="sd">        :type rvalues: `obj`list &lt; :obj:`float`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="p">:</span>
            <span class="n">rois</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">slabel</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;|,| |</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">roilabels</span><span class="p">))</span>
            <span class="n">slabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">lb</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="n">slabel</span> <span class="k">if</span> <span class="n">lb</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">slabel</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">slabel</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;__null__&quot;</span><span class="p">]</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">lastcrdlist</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">toadd</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">lastalias</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">rvalues</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span>
                    <span class="s2">&quot;DetectorROIsValues&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({}))</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lastroisvalues</span> <span class="o">=</span> <span class="n">rvalues</span>
            <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">slabel</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">toadd</span><span class="p">:</span>
                    <span class="n">rois</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">lastcrdlist</span> <span class="o">=</span> <span class="n">rois</span><span class="p">[</span><span class="n">alias</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">rid</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">rvalues</span><span class="p">):</span>
                    <span class="n">lastcrdlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">asscalar</span><span class="p">(</span><span class="n">rvalues</span><span class="p">[</span><span class="n">rid</span><span class="p">])</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">rvalues</span><span class="p">[</span><span class="n">rid</span><span class="p">],</span> <span class="s2">&quot;item&quot;</span><span class="p">)</span>
                        <span class="k">else</span> <span class="n">rvalues</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">rid</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">toadd</span><span class="p">:</span>
                        <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lastcrdlist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">rois</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">rois</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                    <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="n">lastalias</span> <span class="o">=</span> <span class="n">alias</span>
            <span class="k">if</span> <span class="n">rid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">while</span> <span class="n">rid</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">rvalues</span><span class="p">):</span>
                    <span class="n">lastcrdlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">np</span><span class="o">.</span><span class="n">asscalar</span><span class="p">(</span><span class="n">rvalues</span><span class="p">[</span><span class="n">rid</span><span class="p">])</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">rvalues</span><span class="p">[</span><span class="n">rid</span><span class="p">],</span> <span class="s2">&quot;item&quot;</span><span class="p">)</span>
                        <span class="k">else</span> <span class="n">rvalues</span><span class="p">[</span><span class="n">rid</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">rid</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lastcrdlist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">lastalias</span> <span class="ow">in</span> <span class="n">rois</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">rois</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">lastalias</span><span class="p">)</span>
                    <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastalias</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span>
                <span class="s2">&quot;DetectorROIsValues&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rois</span><span class="p">))</span></div>

<div class="viewcode-block" id="ImageWidget.setTangoClient"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setTangoClient">[docs]</a>    <span class="k">def</span> <span class="nf">setTangoClient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tangoclient</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets tango client</span>

<span class="sd">        :param tangoclient: attribute name</span>
<span class="sd">        :type tangoclient:</span>
<span class="sd">             :class:`lavuelib.controllerClient.ControllerClient`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span> <span class="o">=</span> <span class="n">tangoclient</span></div>

    <span class="k">def</span> <span class="nf">__connectsplitters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; connects splitters  signals</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">lowerPlotSplitter</span><span class="o">.</span><span class="n">splitterMoved</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_moveUpperPlotSplitter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">upperPlotSplitter</span><span class="o">.</span><span class="n">splitterMoved</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_moveLowerPlotSplitter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__disconnectsplitters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; disconnects splitters  signals</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">lowerPlotSplitter</span><span class="o">.</span><span class="n">splitterMoved</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_moveUpperPlotSplitter</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(str(e))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">upperPlotSplitter</span><span class="o">.</span><span class="n">splitterMoved</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_moveLowerPlotSplitter</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(str(e))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_moveLowerPlotSplitter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; moves the lower plot splitter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__disconnectsplitters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">lowerPlotSplitter</span><span class="o">.</span><span class="n">moveSplitter</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__connectsplitters</span><span class="p">()</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_moveUpperPlotSplitter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; moves the upper plot splitter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__disconnectsplitters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">upperPlotSplitter</span><span class="o">.</span><span class="n">moveSplitter</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__connectsplitters</span><span class="p">()</span>

<div class="viewcode-block" id="ImageWidget.onedbottomplot"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.onedbottomplot">[docs]</a>    <span class="k">def</span> <span class="nf">onedbottomplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; creates 1d bottom plot</span>

<span class="sd">        :param clear: clear flag</span>
<span class="sd">        :type clear: :obj:`bool`</span>
<span class="sd">        :returns: 1d bottom plot</span>
<span class="sd">        :rtype: :class:`pyqtgraph.PlotDataItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">clear</span><span class="o">=</span><span class="n">clear</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.onedshowlegend"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.onedshowlegend">[docs]</a>    <span class="k">def</span> <span class="nf">onedshowlegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows/hides 1d bottom plot legend</span>

<span class="sd">        :param status: show flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        :returns: 1d bottom plot</span>
<span class="sd">        :rtype: :class:`pyqtgraph.PlotDataItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">plotItem</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">plotItem</span><span class="o">.</span><span class="n">legend</span>
            <span class="n">its</span> <span class="o">=</span> <span class="p">[</span><span class="n">it</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">legend</span><span class="o">.</span><span class="n">items</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">its</span><span class="p">:</span>
                <span class="n">legend</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
            <span class="n">legend</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.bottomplotShowMenu"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.bottomplotShowMenu">[docs]</a>    <span class="k">def</span> <span class="nf">bottomplotShowMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">freeze</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows freeze or/and clean action in the menu</span>

<span class="sd">        :param freeze: freeze show status</span>
<span class="sd">        :type freeze: :obj:`bool`</span>
<span class="sd">        :param freeze: clean show status</span>
<span class="sd">        :type freeze: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">showMenu</span><span class="p">(</span><span class="n">freeze</span><span class="p">,</span> <span class="n">clear</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.bottomplotStretch"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.bottomplotStretch">[docs]</a>    <span class="k">def</span> <span class="nf">bottomplotStretch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stretch</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; stretches the bottom plot</span>

<span class="sd">        :param stretch: stretch factor</span>
<span class="sd">        :type stretch: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">plotSplitter</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">stretch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">stretch</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">plotSplitter</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">plotSplitter</span><span class="o">.</span><span class="n">setSizes</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">plotSplitter</span><span class="o">.</span><span class="n">setStretchFactor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.onedrightplot"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.onedrightplot">[docs]</a>    <span class="k">def</span> <span class="nf">onedrightplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; creates 1d right plot</span>

<span class="sd">        :param clear: clear flag</span>
<span class="sd">        :type clear: :obj:`bool`</span>
<span class="sd">        :returns: 1d right plot</span>
<span class="sd">        :rtype: :class:`pyqtgraph.PlotDataItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.onedbarbottomplot"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.onedbarbottomplot">[docs]</a>    <span class="k">def</span> <span class="nf">onedbarbottomplot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; creates 1d bottom bar plot</span>

<span class="sd">        :returns: 1d bottom bar plot</span>
<span class="sd">        :rtype: :class:`pyqtgraph.BarGraphItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bg</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">BarGraphItem</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y0</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="n">y1</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">],</span> <span class="n">brush</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">bg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bg</span></div>

<div class="viewcode-block" id="ImageWidget.onedbarrightplot"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.onedbarrightplot">[docs]</a>    <span class="k">def</span> <span class="nf">onedbarrightplot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; creates 1d right bar plot</span>

<span class="sd">        :returns: 1d right bar plot</span>
<span class="sd">        :rtype: :class:`pyqtgraph.BarGraphItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bg</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">BarGraphItem</span><span class="p">(</span><span class="n">x0</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="n">x1</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mf">0.</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="p">[</span><span class="mf">1.</span><span class="p">],</span> <span class="n">brush</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">bg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bg</span></div>

<div class="viewcode-block" id="ImageWidget.removebottomplot"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.removebottomplot">[docs]</a>    <span class="k">def</span> <span class="nf">removebottomplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes bottom plot</span>

<span class="sd">        :param plot: right plot item</span>
<span class="sd">        :type plot: :class:`pyqtgraph.PlotItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.removerightplot"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.removerightplot">[docs]</a>    <span class="k">def</span> <span class="nf">removerightplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes right plot</span>

<span class="sd">        :param plot: right plot item</span>
<span class="sd">        :type plot: :class:`pyqtgraph.PlotItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__addToolWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; add tool subwidgets into grid layout</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">tt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tooltypes</span><span class="p">:</span>
            <span class="n">twg</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">toolWidget</span><span class="p">,</span> <span class="n">tt</span><span class="p">)(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__toolwidgets</span><span class="p">[</span><span class="n">twg</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">twg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__toolnames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">twg</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">twg</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolVerticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">twg</span><span class="p">)</span>

<div class="viewcode-block" id="ImageWidget.settings"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.settings">[docs]</a>    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides settings</span>

<span class="sd">        :returns: setting object</span>
<span class="sd">        :rtype: :class:`lavuelib.settings.Settings`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span></div>

    <span class="nd">@debugmethod</span>
    <span class="k">def</span> <span class="nf">__connecttool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; connect current tool widget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">signal</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">signal2slot</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">signal</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signal</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">slot</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">slot</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span>
                <span class="n">signal</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">activate</span><span class="p">()</span>

<div class="viewcode-block" id="ImageWidget.disconnecttool"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.disconnecttool">[docs]</a>    <span class="nd">@debugmethod</span>
    <span class="k">def</span> <span class="nf">disconnecttool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; disconnect current tool widget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">signal</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">signal2slot</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">signal</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signal</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">slot</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">slot</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slot</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">signal</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># print(str(e))</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">deactivate</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateMetaData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateMetaData">[docs]</a>    <span class="k">def</span> <span class="nf">updateMetaData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axisscales</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axislabels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">rescale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Metadata informations</span>

<span class="sd">        :param axisscales: [xstart, ystart, xscale, yscale]</span>
<span class="sd">        :type axisscales:</span>
<span class="sd">                  [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`]</span>
<span class="sd">        :param axislabels: [xtext, ytext, xunits, yunits]</span>
<span class="sd">        :type axislabels:</span>
<span class="sd">                  [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`]</span>
<span class="sd">        :param rescale: rescale or select range window</span>
<span class="sd">        :type rescale: :obj:`True`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">updateMetaData</span><span class="p">(</span><span class="n">axisscales</span><span class="p">,</span> <span class="n">axislabels</span><span class="p">,</span>
                                            <span class="n">rescale</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scalesChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateROIs"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateROIs">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rid</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update ROIs</span>

<span class="sd">        :param rid: roi id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        :param coords: roi coordinates</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                  &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updateROIs</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">applyTipsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">roiCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">roiNumberChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updateRegions"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateRegions">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateRegions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Ranges</span>

<span class="sd">        :param points: roi coordinates</span>
<span class="sd">        :type points: :obj:`list` &lt;  :obj:`list` &lt;  :obj:`list`</span>
<span class="sd">                  &lt; (:obj:`float`, :obj:`float`) &gt; &gt; &gt;</span>
<span class="sd">        :param rid: region id</span>
<span class="sd">        :type rid: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;regions&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updateRegions</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">rid</span><span class="p">)</span></div>
        <span class="c1"># self.applyTipsChanged.emit(rid)</span>
        <span class="c1"># self.roiCoordsChanged.emit()</span>
        <span class="c1"># self.roiNumberChanged.emit(rid)</span>

<div class="viewcode-block" id="ImageWidget.updateCuts"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateCuts">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateCuts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Cuts</span>

<span class="sd">        :param cid: cut id</span>
<span class="sd">        :type cid: :obj:`int`</span>
<span class="sd">        :param coords: cut coordinates and width</span>
<span class="sd">        :type coords: :obj:`list`</span>
<span class="sd">                  &lt; [float, float, float, float, float] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;cuts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updateCuts</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cutCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cutNumberChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.currentTool"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.currentTool">[docs]</a>    <span class="k">def</span> <span class="nf">currentTool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the current tool</span>

<span class="sd">        :returns: current tool name</span>
<span class="sd">        :rtype: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">())</span></div>

<div class="viewcode-block" id="ImageWidget.showCurrentTool"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.showCurrentTool">[docs]</a>    <span class="nd">@debugmethod</span>
    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">showCurrentTool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows the current tool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QMutexLocker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__mutex</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
            <span class="n">stwg</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">nm</span><span class="p">,</span> <span class="n">twg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolwidgets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="n">nm</span><span class="p">:</span>
                    <span class="n">stwg</span> <span class="o">=</span> <span class="n">twg</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">twg</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disconnecttool</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span> <span class="o">=</span> <span class="n">stwg</span>
            <span class="k">if</span> <span class="n">stwg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stwg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updateinfowidgets</span><span class="p">(</span><span class="n">stwg</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__connecttool</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentToolChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

    <span class="c1"># @debugmethod</span>
<div class="viewcode-block" id="ImageWidget.showTool"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.showTool">[docs]</a>    <span class="k">def</span> <span class="nf">showTool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; shows the current tool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stwg</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">nm</span><span class="p">,</span> <span class="n">twg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolwidgets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">text</span> <span class="o">==</span> <span class="n">nm</span><span class="p">:</span>
                <span class="n">stwg</span> <span class="o">=</span> <span class="n">twg</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">twg</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnecttool</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span> <span class="o">=</span> <span class="n">stwg</span>
        <span class="k">if</span> <span class="n">stwg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stwg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateinfowidgets</span><span class="p">(</span><span class="n">stwg</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__connecttool</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentToolChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updateinfowidgets"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateinfowidgets">[docs]</a>    <span class="k">def</span> <span class="nf">updateinfowidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setSubWidgets</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__updateinfowidgets</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__updateinfowidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update info widgets</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">infolabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLabel</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">infolabel</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">infotips</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLabel</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">infotips</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLabel</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">infolineedit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLineEdit</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">infolineedit</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">infotips</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLineEdit</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">infotips</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLineEdit</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">bottomplot</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">oneDBottomWidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">lowerPlotWidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">parameters</span><span class="o">.</span><span class="n">bottomplot</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">oneDBottomWidget</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">lowerPlotWidget</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">rightplot</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">cornerWidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">oneDRightWidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="n">smin</span><span class="p">,</span> <span class="n">smax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">upperPlotSplitter</span><span class="o">.</span><span class="n">getRange</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_moveUpperPlotSplitter</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">smax</span><span class="o">-</span><span class="n">smin</span><span class="p">)</span><span class="o">*</span><span class="mi">4</span><span class="o">/</span><span class="mf">5.</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_moveLowerPlotSplitter</span><span class="p">(</span><span class="nb">int</span><span class="p">((</span><span class="n">smax</span><span class="o">-</span><span class="n">smin</span><span class="p">)</span><span class="o">*</span><span class="mi">4</span><span class="o">/</span><span class="mf">5.</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">parameters</span><span class="o">.</span><span class="n">rightplot</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">cornerWidget</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">oneDRightWidget</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="ImageWidget.setTransformations"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setTransformations">[docs]</a>    <span class="k">def</span> <span class="nf">setTransformations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transpose</span><span class="p">,</span> <span class="n">leftrightflip</span><span class="p">,</span> <span class="n">updownflip</span><span class="p">,</span>
                           <span class="n">orgtranspose</span><span class="p">,</span> <span class="n">orgleftrightflip</span><span class="p">,</span> <span class="n">orgupdownflip</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets coordinate transformations</span>

<span class="sd">        :param transpose: transpose coordinates flag</span>
<span class="sd">        :type transpose: :obj:`bool`</span>
<span class="sd">        :param leftrightflip: left-right flip coordinates flag</span>
<span class="sd">        :type leftrightflip: :obj:`bool`</span>
<span class="sd">        :param updownflip: up-down flip coordinates flag</span>
<span class="sd">        :type updownflip: :obj:`bool`</span>
<span class="sd">        :param orgtranspose: selected transpose coordinates flag</span>
<span class="sd">        :type orgtranspose: :obj:`bool`</span>
<span class="sd">        :param orgleftrightflip: selected left-right flip coordinates flag</span>
<span class="sd">        :type orgleftrightflip: :obj:`bool`</span>
<span class="sd">        :param orgupdownflip: selected up-down flip coordinates flag</span>
<span class="sd">        :type orgupdownflip: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oldtrans</span><span class="p">,</span> <span class="n">oldleftright</span><span class="p">,</span> <span class="n">oldupdown</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">oldleftright</span> <span class="o">!=</span> <span class="n">leftrightflip</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">(),</span> <span class="s2">&quot;invertX&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">invertX</span><span class="p">(</span><span class="n">leftrightflip</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="sd">&quot;&quot;&quot; version 0.9.10 without invertX &quot;&quot;&quot;</span>
            <span class="c1"># workaround for a bug in old pyqtgraph versions: stretch 0.10</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">(),</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">(),</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bottomplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">oldupdown</span> <span class="o">!=</span> <span class="n">updownflip</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">invertY</span><span class="p">(</span><span class="n">updownflip</span><span class="p">)</span>
            <span class="c1"># workaround for a bug in old pyqtgraph versions: stretch 0.9.10</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">(),</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">(),</span>
                <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__rightplot</span><span class="o">.</span><span class="n">getViewBox</span><span class="p">()</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span> <span class="o">=</span> <span class="p">(</span><span class="n">orgtranspose</span><span class="p">,</span> <span class="n">orgleftrightflip</span><span class="p">,</span> <span class="n">orgupdownflip</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setTransformations</span><span class="p">(</span>
            <span class="n">transpose</span><span class="p">,</span> <span class="n">leftrightflip</span><span class="p">,</span> <span class="n">updownflip</span><span class="p">,</span>
            <span class="n">orgtranspose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scalesChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lastroisparams</span> <span class="ow">or</span> \
               <span class="bp">self</span><span class="o">.</span><span class="n">__lastkeepcoords</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">keepcoords</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">keepcoords</span><span class="p">:</span>
                    <span class="n">selectedtrans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">selectedtrans</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="n">pars</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;transpose&quot;</span><span class="p">:</span> <span class="n">selectedtrans</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="s2">&quot;flip-left-right&quot;</span><span class="p">:</span> <span class="n">selectedtrans</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="s2">&quot;flip-up-down&quot;</span><span class="p">:</span> <span class="n">selectedtrans</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="p">}</span>
                <span class="n">lpars</span> <span class="o">=</span> <span class="p">[</span><span class="n">tr</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pars</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="k">if</span> <span class="n">pars</span><span class="p">[</span><span class="n">tr</span><span class="p">]]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__tangoclient</span><span class="o">.</span><span class="n">writeAttribute</span><span class="p">(</span>
                    <span class="s2">&quot;DetectorROIsParams&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">lpars</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lastroisparams</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__lastkeepcoords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">keepcoords</span></div>

<div class="viewcode-block" id="ImageWidget.transformations"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.transformations">[docs]</a>    <span class="k">def</span> <span class="nf">transformations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; povides coordinates transformations</span>

<span class="sd">        :returns: transpose, leftrightflip, updownflip flags,</span>
<span class="sd">                  original transpose</span>
<span class="sd">        :rtype: (:obj:`bool`, :obj:`bool`, :obj:`bool`, :obj:`bool`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.plot"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">rawarray</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">imagename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maskarray</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; plots the image</span>

<span class="sd">        :param array: 2d image array</span>
<span class="sd">        :type array: :class:`numpy.ndarray`</span>
<span class="sd">        :param rawarray: 2d raw image array</span>
<span class="sd">        :type rawarray: :class:`numpy.ndarray`</span>
<span class="sd">        :param imagename: image name</span>
<span class="sd">        :type imagename: :obj:`str`</span>
<span class="sd">        :param maskarray: 2d color mask image array</span>
<span class="sd">        :type maskarray: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">array</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">rawarray</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rawarray</span> <span class="o">=</span> <span class="n">array</span>
        <span class="n">barrays</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">=</span> <span class="n">array</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span> <span class="o">=</span> <span class="n">rawarray</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__imagename</span> <span class="o">=</span> <span class="n">imagename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskdata</span> <span class="o">=</span> <span class="n">maskarray</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="p">:</span>
            <span class="n">barrays</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">beforeplot</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">rawarray</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span>
            <span class="n">barrays</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">barrays</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">,</span>
            <span class="n">barrays</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">barrays</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span><span class="p">,</span>
            <span class="kc">None</span> <span class="k">if</span> <span class="n">barrays</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__maskdata</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">afterplot</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateImage"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateImage">[docs]</a>    <span class="k">def</span> <span class="nf">updateImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rawarray</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maskarray</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update the image</span>

<span class="sd">        :param array: 2d image array</span>
<span class="sd">        :type array: :class:`numpy.ndarray`</span>
<span class="sd">        :param rawarray: 2d raw image array</span>
<span class="sd">        :type rawarray: :class:`numpy.ndarray`</span>
<span class="sd">        :param maskarray: 2d color mask image array</span>
<span class="sd">        :type maskarray: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span>
            <span class="n">array</span> <span class="k">if</span> <span class="n">array</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">,</span>
            <span class="n">rawarray</span> <span class="k">if</span> <span class="n">rawarray</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span><span class="p">,</span>
            <span class="n">maskarray</span> <span class="k">if</span> <span class="n">maskarray</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__maskdata</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setAutoLevels"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setAutoLevels">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setAutoLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autolevels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets auto levels</span>

<span class="sd">        :param autolevels: 2: auto levels enabled 1: with autofactor</span>
<span class="sd">        :type autolevels: :obj:&#39;int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setAutoLevels</span><span class="p">(</span><span class="n">autolevels</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setAutoDownSample"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setAutoDownSample">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setAutoDownSample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autodownsample</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets auto down sample</span>

<span class="sd">        :param autolevels: auto down sample enabled</span>
<span class="sd">        :type autolevels: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setAutoDownSample</span><span class="p">(</span><span class="n">autodownsample</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setChannelLevels"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setChannelLevels">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setChannelLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets minimum intensity levels</span>

<span class="sd">        :param levels: channel intensity levels</span>
<span class="sd">        :type levels: :obj:`list` &lt; (:obj`float`:, :obj`float`:)&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setDisplayChannelLevels</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setMinLevel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setMinLevel">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setMinLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets minimum intensity level</span>

<span class="sd">        :param level: minimum intensity</span>
<span class="sd">        :type level: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setDisplayMinLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setMaxLevel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setMaxLevel">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setMaxLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets maximum intensity level</span>

<span class="sd">        :param level: maximum intensity</span>
<span class="sd">        :type level: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setDisplayMaxLevel</span><span class="p">(</span><span class="n">level</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setDisplayedText"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setDisplayedText">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">setDisplayedText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets displayed info text and recalculates the current roi sum</span>

<span class="sd">        :param text: text to display</span>
<span class="sd">        :type text: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">currentroi</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sroiVal</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__lasttext</span> <span class="o">=</span> <span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lasttext</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">isROIsEnabled</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">showallrois</span><span class="p">:</span>
                <span class="n">currentroi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentROI</span><span class="p">()</span>
                <span class="n">roiVals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">calcROIsums</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">roiVals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">sroiVal</span> <span class="o">=</span> <span class="s2">&quot; / &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                        <span class="p">[((</span><span class="s2">&quot;</span><span class="si">%g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">roiv</span><span class="p">)</span> <span class="k">if</span> <span class="n">roiv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;?&quot;</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">roiv</span> <span class="ow">in</span> <span class="n">roiVals</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">sendrois</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lastroisvalues</span> <span class="o">!=</span> <span class="n">roiVals</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeDetectorROIsValuesAttribute</span><span class="p">(</span><span class="n">roiVals</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">roiVal</span><span class="p">,</span> <span class="n">currentroi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span>\
                                     <span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">calcROIsum</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">roiVal</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">sroiVal</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%.4f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">roiVal</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">sendrois</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lastroisvalues</span> <span class="o">!=</span> <span class="p">[</span><span class="n">roiVal</span><span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeDetectorROIsValuesAttribute</span><span class="p">([</span><span class="n">roiVal</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">currentroi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roiValueChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">currentroi</span><span class="p">,</span> <span class="n">sroiVal</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.calcROIsum"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.calcROIsum">[docs]</a>    <span class="k">def</span> <span class="nf">calcROIsum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;calculates the current roi sum</span>

<span class="sd">        :returns: sum roi value, roi id</span>
<span class="sd">        :rtype: (:obj:`str`, :obj:`int`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">calcROIsum</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.calcROIsums"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.calcROIsums">[docs]</a>    <span class="k">def</span> <span class="nf">calcROIsums</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; calculates all roi sums</span>

<span class="sd">        :returns: sum roi value, roi id</span>
<span class="sd">        :rtype: :obj:`list` &lt; float &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">calcROIsums</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.setExtensionsRefreshTime"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setExtensionsRefreshTime">[docs]</a>    <span class="k">def</span> <span class="nf">setExtensionsRefreshTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">refreshtime</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set display extension refresh time</span>

<span class="sd">        :param refreshtime: refresh time in seconds</span>
<span class="sd">        :type refreshtime: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extensions</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">setRefreshTime</span><span class="p">(</span>
                <span class="n">refreshtime</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updateDisplayedText"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateDisplayedText">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateDisplayedText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets displayed info text</span>

<span class="sd">        :param text: text to display</span>
<span class="sd">        :type text: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updateDisplayedTextTip"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateDisplayedTextTip">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateDisplayedTextTip</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets displayed info text tup</span>

<span class="sd">        :param text: tip text to display</span>
<span class="sd">        :type text: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">infoLineEdit</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setTicks"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setTicks">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">setTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; launch axes widget</span>

<span class="sd">        :returns: apply status</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setTicks</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emitTCC</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateTicks"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateTicks">[docs]</a>    <span class="k">def</span> <span class="nf">updateTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Ticks values</span>

<span class="sd">        :param record: dict record with the tick parameters:</span>
<span class="sd">                       &quot;position&quot; : [x, y]</span>
<span class="sd">                       &quot;scale&quot; : [sx, sy]</span>
<span class="sd">                       &quot;xtext&quot; : xlabel</span>
<span class="sd">                       &quot;ytext&quot; : ylabel</span>
<span class="sd">                       &quot;xunits&quot; : xunits</span>
<span class="sd">                       &quot;yunits&quot; : yunits</span>
<span class="sd">        :type record: :obj:`dict`&lt;:obj:`str`, `any`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">updateTicks</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">emitTCC</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.image"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.image">[docs]</a>    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iid</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides imageItem object</span>

<span class="sd">        :param iid: image id</span>
<span class="sd">        :type iid: :obj:`int`</span>
<span class="sd">        :returns: image object</span>
<span class="sd">        :rtype: :class:`pyqtgraph.ImageItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">iid</span><span class="p">)</span></div>

    <span class="c1"># @debugmethod</span>
<div class="viewcode-block" id="ImageWidget.emitTCC"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.emitTCC">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">emitTCC</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits toolConfigurationChanged</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolConfigurationChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.emitCutCoordsChanged"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.emitCutCoordsChanged">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">emitCutCoordsChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits cutCoordsChanged</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cutCoordsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_emitFreezeBottomPlotClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits freezeBottomPlotClicked</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freezeBottomPlotClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_emitClearBottomPlotClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits clearBottomPlotClicked</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearBottomPlotClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

<div class="viewcode-block" id="ImageWidget.emitAspectLockedToggled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.emitAspectLockedToggled">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">emitAspectLockedToggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits aspectLockedToggled</span>

<span class="sd">        :param status: current state</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectLockedToggled</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></div>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">_emitMouseImagePositionChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits mouseImagePositionChanged</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">isROIsEnabled</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lastrois</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span>\
               <span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">roiCoords</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeDetectorROIsAttribute</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_emitMouseImageDoubleClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits mouseImageDoubleClicked</span>

<span class="sd">        :param x: x pixel coordinate</span>
<span class="sd">        :type x: :obj:`float`</span>
<span class="sd">        :param y: y pixel coordinate</span>
<span class="sd">        :type y: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseImageDoubleClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_emitMouseImageSingleClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits mouseImageSingleClicked</span>

<span class="sd">        :param x: x pixel coordinate</span>
<span class="sd">        :type x: :obj:`float`</span>
<span class="sd">        :param y: y pixel coordinate</span>
<span class="sd">        :type y: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseImageSingleClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<div class="viewcode-block" id="ImageWidget.emitReplotImage"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.emitReplotImage">[docs]</a>    <span class="k">def</span> <span class="nf">emitReplotImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autorange</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;emits replotImage</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replotImage</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">autorange</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setAspectLocked"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setAspectLocked">[docs]</a>    <span class="k">def</span> <span class="nf">setAspectLocked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sets aspectLocked</span>

<span class="sd">        :param status: state to set</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        :returns: old state</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setAspectLocked</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setStatsWOScaling"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setStatsWOScaling">[docs]</a>    <span class="k">def</span> <span class="nf">setStatsWOScaling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets statistics without scaling flag</span>

<span class="sd">        :param status: statistics without scaling flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        :returns: change status</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setStatsWOScaling</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setColors"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setColors">[docs]</a>    <span class="k">def</span> <span class="nf">setColors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets item colors</span>

<span class="sd">        :param colors: json list of roi colors</span>
<span class="sd">        :type colors: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extensions</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="s2">&quot;setColors&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">setColors</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setOverflowColor"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setOverflowColor">[docs]</a>    <span class="k">def</span> <span class="nf">setOverflowColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets item color</span>

<span class="sd">        :param color: json list of overflow color</span>
<span class="sd">        :type color: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setOverflowColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setScalingType"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setScalingType">[docs]</a>    <span class="k">def</span> <span class="nf">setScalingType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalingtype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets intensity scaling types</span>

<span class="sd">        :param scalingtype: intensity scaling type</span>
<span class="sd">        :type scalingtype: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setScalingType</span><span class="p">(</span><span class="n">scalingtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setDoBkgSubtraction"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setDoBkgSubtraction">[docs]</a>    <span class="k">def</span> <span class="nf">setDoBkgSubtraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets do background subtraction flag</span>

<span class="sd">        :param status: do background subtraction flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setDoBkgSubtraction</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setDoBFSubtraction"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setDoBFSubtraction">[docs]</a>    <span class="k">def</span> <span class="nf">setDoBFSubtraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets do brightfield subtraction flag</span>

<span class="sd">        :param status: do brightfield subtraction flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setDoBFSubtraction</span><span class="p">(</span><span class="n">state</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setSardanaUtils"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setSardanaUtils">[docs]</a>    <span class="k">def</span> <span class="nf">setSardanaUtils</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sardana</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets sardana utils</span>

<span class="sd">        :param sardana: sardana utils</span>
<span class="sd">        :type sardana: :class:`lavuelib.sardanaUtils.SardanaUtils`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">sardana</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sardanaEnabled</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sardanaEnabled</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span> <span class="o">=</span> <span class="n">sardana</span></div>

<div class="viewcode-block" id="ImageWidget.getDoor"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.getDoor">[docs]</a>    <span class="k">def</span> <span class="nf">getDoor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; runs macro</span>

<span class="sd">        :param command: command list</span>
<span class="sd">        :type command: :obj:`list` &lt;:obj:`str`&gt;</span>
<span class="sd">        :return: macro runned</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">isr</span><span class="o">.</span><span class="n">TANGO</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getDeviceName</span><span class="p">(</span><span class="s2">&quot;Door&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">openProxy</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">))</span>
                <span class="n">dp</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># print(str(e))</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="n">dp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">dp</span></div>

<div class="viewcode-block" id="ImageWidget.getElementNames"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.getElementNames">[docs]</a>    <span class="k">def</span> <span class="nf">getElementNames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listattr</span><span class="p">,</span> <span class="n">typefilter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides experimental Channels</span>

<span class="sd">        :param listattr: pool attribute with list</span>
<span class="sd">        :type listattr: :obj:`str`</span>
<span class="sd">        :param typefilter: pool attribute with list</span>
<span class="sd">        :type typefilter: :obj:`list` &lt;:obj:`str`&gt;</span>
<span class="sd">        :returns: names from given pool listattr</span>
<span class="sd">        :rtype: :obj:`list` &lt;:obj:`str`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">isr</span><span class="o">.</span><span class="n">TANGO</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getDeviceName</span><span class="p">(</span><span class="s2">&quot;Door&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">elements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getElementNames</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">,</span>
                    <span class="n">listattr</span><span class="p">,</span> <span class="n">typefilter</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># print(str(e))</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">elements</span></div>

<div class="viewcode-block" id="ImageWidget.runMacro"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.runMacro">[docs]</a>    <span class="k">def</span> <span class="nf">runMacro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; runs macro</span>

<span class="sd">        :param command: command list</span>
<span class="sd">        :type command: :obj:`list` &lt;:obj:`str`&gt;</span>
<span class="sd">        :return: macro runned</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">isr</span><span class="o">.</span><span class="n">TANGO</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getDeviceName</span><span class="p">(</span><span class="s2">&quot;Door&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">warn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">runMacro</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">),</span> <span class="n">command</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">warn</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;ImageWidget.runMacro </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
                    <span class="c1"># print(&quot;Warning: %s&quot; % str(warn))</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">)</span>
                    <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lavue: Errors in running macro: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">command</span><span class="p">,</span>
                        <span class="n">msg</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">traceback</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                    <span class="s2">&quot;lavue: Errors in running macro: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">command</span><span class="p">)</span>
                <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lavue: Errors in running macro: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">command</span><span class="p">,</span>
                    <span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ImageWidget.showDoorError"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.showDoorError">[docs]</a>    <span class="k">def</span> <span class="nf">showDoorError</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; show door error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">isr</span><span class="o">.</span><span class="n">TANGO</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getDeviceName</span><span class="p">(</span><span class="s2">&quot;Door&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">warn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">warn</span><span class="p">:</span>
                    <span class="c1"># print(&quot;Warning: %s&quot; % str(warn))</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">)</span>
                    <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lavue: Errors in running macro &quot;</span><span class="p">,</span>
                        <span class="n">msg</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">traceback</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                    <span class="s2">&quot;lavue: Errors in running macro&quot;</span><span class="p">)</span>
                <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lavue: Errors in running macro&quot;</span><span class="p">,</span>
                    <span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span></div>

<div class="viewcode-block" id="ImageWidget.applyROIs"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.applyROIs">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">applyROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rlabel</span><span class="p">,</span> <span class="n">roispin</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; saves ROIs in sardana and add them to the measurement group</span>

<span class="sd">        :param rlabel: rois aliases separated by space</span>
<span class="sd">        :type rlabel: :obj:`str`</span>
<span class="sd">        :param roispin: the current number of rois</span>
<span class="sd">        :type roispin: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">isr</span><span class="o">.</span><span class="n">TANGO</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">sardana</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getDeviceName</span><span class="p">(</span>
                        <span class="s2">&quot;Door&quot;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">rois</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getScanEnv</span><span class="p">(</span>
                        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">]))</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
                    <span class="n">text</span> <span class="o">=</span> <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                        <span class="s2">&quot;Problems in connecting to Door or MacroServer&quot;</span><span class="p">)</span>
                    <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span>
                        <span class="s2">&quot;lavue: Error in connecting to Door or MacroServer&quot;</span><span class="p">,</span>
                        <span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                    <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rois</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="n">slabel</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;|,| |</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">rlabel</span><span class="p">))</span>
            <span class="n">slabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">lb</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="n">slabel</span> <span class="k">if</span> <span class="n">lb</span><span class="p">]</span>
            <span class="n">rid</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">lastcrdlist</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">toremove</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">toadd</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="s2">&quot;DetectorROIs&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rois</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">lastalias</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">roicoords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">roiCoords</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">slabel</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">toadd</span><span class="p">:</span>
                    <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">][</span><span class="n">alias</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">lastcrdlist</span> <span class="o">=</span> <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">][</span><span class="n">alias</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">rid</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">roicoords</span><span class="p">):</span>
                    <span class="n">lastcrdlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">roicoords</span><span class="p">[</span><span class="n">rid</span><span class="p">])</span>
                    <span class="n">rid</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">alias</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">toadd</span><span class="p">:</span>
                        <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lastcrdlist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">roispin</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">toremove</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="n">lastalias</span> <span class="o">=</span> <span class="n">alias</span>
            <span class="k">if</span> <span class="n">rid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">while</span> <span class="n">rid</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">roicoords</span><span class="p">):</span>
                    <span class="n">lastcrdlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">roicoords</span><span class="p">[</span><span class="n">rid</span><span class="p">])</span>
                    <span class="n">rid</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">lastcrdlist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">lastalias</span> <span class="ow">in</span> <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">lastalias</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">roispin</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">toadd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastalias</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">toremove</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastalias</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">keepcoords</span><span class="p">:</span>
                <span class="n">selectedtrans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">selectedtrans</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">pars</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;transpose&quot;</span><span class="p">:</span> <span class="n">selectedtrans</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="s2">&quot;flip-left-right&quot;</span><span class="p">:</span> <span class="n">selectedtrans</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="s2">&quot;flip-up-down&quot;</span><span class="p">:</span> <span class="n">selectedtrans</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="n">lpars</span> <span class="o">=</span> <span class="p">[</span><span class="n">tr</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pars</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="k">if</span> <span class="n">pars</span><span class="p">[</span><span class="n">tr</span><span class="p">]]</span>
            <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIsParams&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lpars</span>
            <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIsOrder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">slabel</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">sardana</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">setScanEnv</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">),</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">rois</span><span class="p">))</span>
                <span class="n">warns</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">addrois</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">toadd</span><span class="p">:</span>
                            <span class="n">_</span><span class="p">,</span> <span class="n">warn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">runMacro</span><span class="p">(</span>
                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">),</span>
                                <span class="p">[</span><span class="s2">&quot;nxsadd&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="p">])</span>
                            <span class="k">if</span> <span class="n">warn</span><span class="p">:</span>
                                <span class="n">warns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
                                <span class="c1"># print(&quot;Warning: %s&quot; % str(warn))</span>
                                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
                        <span class="k">for</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">toremove</span><span class="p">:</span>
                            <span class="n">_</span><span class="p">,</span> <span class="n">warn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">runMacro</span><span class="p">(</span>
                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">),</span>
                                <span class="p">[</span><span class="s2">&quot;nxsrm&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="p">])</span>
                            <span class="k">if</span> <span class="n">warn</span><span class="p">:</span>
                                <span class="n">warns</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
                                <span class="c1"># print(&quot;Warning: %s&quot; % str(warn))</span>
                                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">warn</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">warns</span><span class="p">:</span>
                            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">warns</span><span class="p">))</span>
                            <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                                <span class="bp">self</span><span class="p">,</span>
                                <span class="s2">&quot;lavue: Errors in setting Measurement group&quot;</span><span class="p">,</span>
                                <span class="n">msg</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">warns</span><span class="p">))</span>

                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="kn">import</span> <span class="nn">traceback</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
                        <span class="n">text</span> <span class="o">=</span> <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                            <span class="s2">&quot;Problems in setting Measurement group&quot;</span><span class="p">)</span>
                        <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                            <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lavue: Error in Setting Measurement group&quot;</span><span class="p">,</span>
                            <span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">analysisdevice</span><span class="p">:</span>
                <span class="n">flatrois</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flattenROIs</span><span class="p">(</span><span class="n">roicoords</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">adp</span> <span class="o">=</span> <span class="n">sardanaUtils</span><span class="o">.</span><span class="n">SardanaUtils</span><span class="o">.</span><span class="n">openProxy</span><span class="p">(</span>
                        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">analysisdevice</span><span class="p">))</span>
                    <span class="n">adp</span><span class="o">.</span><span class="n">RoIs</span> <span class="o">=</span> <span class="n">flatrois</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
                    <span class="n">text</span> <span class="o">=</span> <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                        <span class="s2">&quot;Problems in setting RoIs for Analysis device&quot;</span><span class="p">)</span>
                    <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lavue: Error in Setting Rois&quot;</span><span class="p">,</span>
                        <span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># print(&quot;Connection error&quot;)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ImageWidget.applyROI: Connection error&quot;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_flattenROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roicoords</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; calculate source rois coordinates from lavue rois coordinates</span>

<span class="sd">        :param roicoords: lavue rois coordinates</span>
<span class="sd">        :type roicoords: :obj:`list`</span>
<span class="sd">                &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        :returns:  detector rois coordinates</span>
<span class="sd">        :rtype: :obj:`list` &lt; :obj:`float` &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">flatrois</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span><span class="p">,</span> <span class="s2">&quot;shape&quot;</span><span class="p">):</span>
            <span class="n">sh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sh</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">crds</span> <span class="ow">in</span> <span class="n">roicoords</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">keepcoords</span><span class="p">:</span>
                <span class="n">trans</span><span class="p">,</span> <span class="n">leftright</span><span class="p">,</span> <span class="n">updown</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()</span>

                <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">trans</span><span class="p">,</span> <span class="n">leftright</span><span class="p">,</span> <span class="n">updown</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                         <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                         <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
                <span class="c1">###</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                         <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
                <span class="c1">###</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                         <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                         <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                <span class="c1">###</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                         <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">flatrois</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                        <span class="p">[</span><span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                         <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Dead end&quot;</span><span class="p">)</span>
            <span class="n">flatrois</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">cr</span> <span class="ow">in</span> <span class="n">flatrois</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">trans</span><span class="p">:</span>
                <span class="n">sha</span><span class="p">,</span> <span class="n">shb</span> <span class="o">=</span> <span class="n">sh</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">shb</span><span class="p">,</span> <span class="n">sha</span> <span class="o">=</span> <span class="n">sh</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">flatrois</span><span class="p">)</span> <span class="o">//</span> <span class="mi">4</span><span class="p">):</span>
                <span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span><span class="p">],</span> <span class="n">sha</span><span class="p">)</span>
                <span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">sha</span><span class="p">)</span>
                <span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">],</span> <span class="n">shb</span><span class="p">)</span>
                <span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">flatrois</span><span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">],</span> <span class="n">shb</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">flatrois</span>

<div class="viewcode-block" id="ImageWidget.fetchROIs"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.fetchROIs">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">fetchROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rlabel</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; loads ROIs from sardana</span>

<span class="sd">        :param rlabel: rois aliases separated by space</span>
<span class="sd">        :type rlabel: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">isr</span><span class="o">.</span><span class="n">TANGO</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">sardana</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getDeviceName</span><span class="p">(</span>
                        <span class="s2">&quot;Door&quot;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">rois</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__sardana</span><span class="o">.</span><span class="n">getScanEnv</span><span class="p">(</span>
                        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">doorname</span><span class="p">),</span>
                        <span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">,</span> <span class="s2">&quot;DetectorROIsOrder&quot;</span><span class="p">]))</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
                    <span class="n">text</span> <span class="o">=</span> <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                        <span class="s2">&quot;Problems in connecting to Door or MacroServer&quot;</span><span class="p">)</span>
                    <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span>
                        <span class="s2">&quot;lavue: Error in connecting to Door or MacroServer&quot;</span><span class="p">,</span>
                        <span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                    <span class="k">return</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">orderrois</span> <span class="ow">and</span> <span class="s2">&quot;DetectorROIsOrder&quot;</span> <span class="ow">in</span> <span class="n">rois</span> \
                   <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIsOrder&quot;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">slabel</span> <span class="o">=</span> <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIsOrder&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">slabel</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;|,| |</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">rlabel</span><span class="p">))</span>
                <span class="n">slabel</span> <span class="o">=</span> <span class="p">[</span><span class="n">lb</span> <span class="k">for</span> <span class="n">lb</span> <span class="ow">in</span> <span class="n">slabel</span> <span class="k">if</span> <span class="n">lb</span><span class="p">]</span>
                <span class="n">detrois</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="s2">&quot;DetectorROIs&quot;</span> <span class="ow">in</span> <span class="n">rois</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span>
                        <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">detrois</span> <span class="o">=</span> <span class="n">rois</span><span class="p">[</span><span class="s2">&quot;DetectorROIs&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">slabel</span><span class="p">:</span>
                        <span class="n">detrois</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                            <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">detrois</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">slabel</span><span class="p">)</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">aliases</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">if</span> <span class="n">slabel</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">lb</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">slabel</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">lb</span> <span class="ow">in</span> <span class="n">detrois</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">slabel</span><span class="p">[</span><span class="n">i</span><span class="p">:]))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="n">detrois</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                                    <span class="k">for</span> <span class="n">cr</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                                            <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cr</span><span class="p">)</span>
                                            <span class="n">aliases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
                                    <span class="k">break</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="n">detrois</span><span class="p">[</span><span class="n">lb</span><span class="p">]</span>
                                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span><span class="p">:</span>
                                    <span class="n">cr</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                                        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cr</span><span class="p">)</span>
                                        <span class="n">aliases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
                                        <span class="n">detrois</span><span class="p">[</span><span class="n">lb</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">detrois</span><span class="p">[</span><span class="n">lb</span><span class="p">]:</span>
                                    <span class="n">detrois</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">detrois</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">cr</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                                <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cr</span><span class="p">)</span>
                                <span class="n">aliases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="n">slabel</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">al</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">aliases</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">aliases</span><span class="p">[</span><span class="n">i</span><span class="p">:]))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">slabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">al</span><span class="p">)</span>
                        <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">slabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">al</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">roiAliasesChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">slabel</span><span class="p">))</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">updateROIs</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">),</span> <span class="n">coords</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">analysisdevice</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">adp</span> <span class="o">=</span> <span class="n">sardanaUtils</span><span class="o">.</span><span class="n">SardanaUtils</span><span class="o">.</span><span class="n">openProxy</span><span class="p">(</span>
                        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">analysisdevice</span><span class="p">))</span>
                    <span class="n">flatrois</span> <span class="o">=</span> <span class="n">adp</span><span class="o">.</span><span class="n">RoIs</span>
                    <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fromFlatROIs</span><span class="p">(</span><span class="n">flatrois</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">updateROIs</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">),</span> <span class="n">coords</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">traceback</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
                    <span class="n">text</span> <span class="o">=</span> <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">getText</span><span class="p">(</span>
                        <span class="s2">&quot;Problems in setting RoIs for Analysis device&quot;</span><span class="p">)</span>
                    <span class="n">messageBox</span><span class="o">.</span><span class="n">MessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;lavue: Error in Setting Rois&quot;</span><span class="p">,</span>
                        <span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># print(&quot;Connection error&quot;)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;ImageWidget.fetchROIs: Connection error&quot;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_fromFlatROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flatrois</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; calculate lavue rois coordinates from source rois coordinates</span>

<span class="sd">        :param roicoords: lavue rois coordinates</span>
<span class="sd">        :type roicoords: :obj:`list` &lt; :obj:`float` &gt;</span>
<span class="sd">        :returns:  detector rois coordinates</span>
<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">                &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span><span class="p">,</span> <span class="s2">&quot;shape&quot;</span><span class="p">):</span>
            <span class="n">sh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sh</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">crds</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">flatrois</span><span class="p">[::</span><span class="mi">4</span><span class="p">],</span> <span class="n">flatrois</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">4</span><span class="p">],</span>
                        <span class="n">flatrois</span><span class="p">[</span><span class="mi">2</span><span class="p">::</span><span class="mi">4</span><span class="p">],</span> <span class="n">flatrois</span><span class="p">[</span><span class="mi">3</span><span class="p">::</span><span class="mi">4</span><span class="p">]):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">keepcoords</span><span class="p">:</span>
                <span class="n">trans</span><span class="p">,</span> <span class="n">leftright</span><span class="p">,</span> <span class="n">updown</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">transformations</span><span class="p">()</span>
                <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">trans</span><span class="p">,</span> <span class="n">leftright</span><span class="p">,</span> <span class="n">updown</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__selectedtrans</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="c1">###</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                   <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                   <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                   <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                   <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="c1">###</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                   <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">trans</span> <span class="ow">and</span> <span class="n">leftright</span> <span class="ow">and</span> <span class="n">updown</span><span class="p">:</span>
                    <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                   <span class="n">sh</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sh</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">crds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Dead end&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">coords</span>

<div class="viewcode-block" id="ImageWidget.currentIntensity"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.currentIntensity">[docs]</a>    <span class="k">def</span> <span class="nf">currentIntensity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides intensity for current mouse position</span>

<span class="sd">        :returns: x position, y position, pixel intensity</span>
<span class="sd">        :rtype: (float, float, float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">currentIntensity</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.scalingLabel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.scalingLabel">[docs]</a>    <span class="k">def</span> <span class="nf">scalingLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling label</span>

<span class="sd">        :returns:  scaling label</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">scalingLabel</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.scaling"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.scaling">[docs]</a>    <span class="k">def</span> <span class="nf">scaling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling type</span>

<span class="sd">        :returns:  scaling type</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">scaling</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.scaledxy"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.scaledxy">[docs]</a>    <span class="k">def</span> <span class="nf">scaledxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaled x,y positions</span>

<span class="sd">        :param x: x pixel coordinate</span>
<span class="sd">        :type x: :obj:`float`</span>
<span class="sd">        :param y: y pixel coordinate</span>
<span class="sd">        :type y: :obj:`float`</span>
<span class="sd">        :param useraxes: use user scaling</span>
<span class="sd">        :type useraxes: :obj:`bool`</span>
<span class="sd">        :returns: scaled x,y position</span>
<span class="sd">        :rtype: (:obj:`float`, :obj:`float`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">scaledxy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">useraxes</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.scale"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.scale">[docs]</a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">noNone</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scale and position of the axes</span>

<span class="sd">        :param useraxes: use user scaling</span>
<span class="sd">        :type useraxes: :obj:`bool`</span>
<span class="sd">        :param noNone: return values without None</span>
<span class="sd">        :type noNone: :obj:`bool`</span>
<span class="sd">        :rtype: [int, int, int, int]</span>
<span class="sd">        :returns: [posx, posy, scalex, scaley]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">useraxes</span><span class="p">,</span> <span class="n">noNone</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.axesunits"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.axesunits">[docs]</a>    <span class="k">def</span> <span class="nf">axesunits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return axes units</span>

<span class="sd">        :returns: x,y units</span>
<span class="sd">        :rtype: (:obj:`str`, :obj:`str`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">axesunits</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.axestext"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.axestext">[docs]</a>    <span class="k">def</span> <span class="nf">axestext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return axes text</span>

<span class="sd">        :returns: x,y text</span>
<span class="sd">        :rtype: (:obj:`str`, :obj:`str`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">axestext</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.roiCoords"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.roiCoords">[docs]</a>    <span class="k">def</span> <span class="nf">roiCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides rois coordinates</span>

<span class="sd">        :return: rois coordinates</span>
<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">               &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">roiCoords</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.meshCoords"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.meshCoords">[docs]</a>    <span class="k">def</span> <span class="nf">meshCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides rois coordinates</span>

<span class="sd">        :return: rois coordinates</span>
<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">               &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;mesh&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">roiCoords</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.cutCoords"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.cutCoords">[docs]</a>    <span class="k">def</span> <span class="nf">cutCoords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides cuts coordinates</span>

<span class="sd">        :return: cuts coordinates</span>
<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">               &lt; [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`] &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;cuts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">cutCoords</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.currentROI"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.currentROI">[docs]</a>    <span class="k">def</span> <span class="nf">currentROI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides current roi id</span>

<span class="sd">        :return: roi id</span>
<span class="sd">        :rtype: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">currentROI</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.currentCut"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.currentCut">[docs]</a>    <span class="k">def</span> <span class="nf">currentCut</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides current cut id</span>

<span class="sd">        :return: cut id</span>
<span class="sd">        :rtype: :obj:`int`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;cuts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">currentCut</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.changeROIRegion"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.changeROIRegion">[docs]</a>    <span class="k">def</span> <span class="nf">changeROIRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes the current roi region</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">changeROIRegion</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.changeMeshRegion"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.changeMeshRegion">[docs]</a>    <span class="k">def</span> <span class="nf">changeMeshRegion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes the current roi region</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;mesh&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">changeROIRegion</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.cutData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.cutData">[docs]</a>    <span class="k">def</span> <span class="nf">cutData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the current cut data</span>

<span class="sd">        :param cid: cut id</span>
<span class="sd">        :type cid: :obj:`int`</span>
<span class="sd">        :returns: current cut data</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;cuts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">cutData</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.rawData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.rawData">[docs]</a>    <span class="k">def</span> <span class="nf">rawData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the raw data</span>

<span class="sd">        :returns: current raw data</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span></div>

<div class="viewcode-block" id="ImageWidget.currentData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.currentData">[docs]</a>    <span class="k">def</span> <span class="nf">currentData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the data</span>

<span class="sd">        :returns: current data</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data</span></div>

<div class="viewcode-block" id="ImageWidget.autoRange"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.autoRange">[docs]</a>    <span class="k">def</span> <span class="nf">autoRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets auto range</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">autoRange</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateHBounds"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateHBounds">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateHBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata1</span><span class="p">,</span> <span class="n">xdata2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the vertical bounds</span>

<span class="sd">        :param xdata1: first x-pixel position</span>
<span class="sd">        :type xdata1: :obj:`float`</span>
<span class="sd">        :param xdata2: second x-pixel position</span>
<span class="sd">        :type xdata2: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;vhbounds&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updateHBounds</span><span class="p">(</span>
            <span class="n">xdata1</span><span class="p">,</span> <span class="n">xdata2</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updateVBounds"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateVBounds">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateVBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ydata1</span><span class="p">,</span> <span class="n">ydata2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the vertical bounds</span>

<span class="sd">        :param ydata1: first x-pixel position</span>
<span class="sd">        :type ydata1: :obj:`float`</span>
<span class="sd">        :param ydata2: second x-pixel position</span>
<span class="sd">        :type ydata2: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;vhbounds&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updateVBounds</span><span class="p">(</span>
            <span class="n">ydata1</span><span class="p">,</span> <span class="n">ydata2</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updateCenter"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateCenter">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the image center</span>

<span class="sd">        :param xdata: x pixel position</span>
<span class="sd">        :type xdata: :obj:`float`</span>
<span class="sd">        :param ydata: y-pixel position</span>
<span class="sd">        :type ydata: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updateCenter</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updatePositionMark"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updatePositionMark">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updatePositionMark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">,</span> <span class="n">scaled</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the position mark</span>

<span class="sd">        :param xdata: x pixel position</span>
<span class="sd">        :type xdata: :obj:`float`</span>
<span class="sd">        :param ydata: y-pixel position</span>
<span class="sd">        :type ydata: :obj:`float`</span>
<span class="sd">        :param scaled: scaled flag</span>
<span class="sd">        :type scaled: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;mark&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updatePositionMark</span><span class="p">(</span>
            <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">,</span> <span class="n">scaled</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.updatePositionTrackingMark"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updatePositionTrackingMark">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updatePositionTrackingMark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">,</span> <span class="n">scaled</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the position tracking mark</span>

<span class="sd">        :param xdata: x pixel position</span>
<span class="sd">        :type xdata: :obj:`float`</span>
<span class="sd">        :param ydata: y-pixel position</span>
<span class="sd">        :type ydata: :obj:`float`</span>
<span class="sd">        :param scaled: scaled flag</span>
<span class="sd">        :type scaled: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;tracking&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">updatePositionMark</span><span class="p">(</span>
            <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">,</span> <span class="n">scaled</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setDoubleClickLock"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setDoubleClickLock">[docs]</a>    <span class="k">def</span> <span class="nf">setDoubleClickLock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets double click lock</span>

<span class="sd">        :param status: status flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setDoubleClickLock</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setTool"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setTool">[docs]</a>    <span class="nd">@debugmethod</span>
    <span class="k">def</span> <span class="nf">setTool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets tool from string</span>

<span class="sd">        :param tool: tool name</span>
<span class="sd">        :type tool: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="n">tool</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ui</span><span class="o">.</span><span class="n">toolComboBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showCurrentTool</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.setToolConfiguration"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setToolConfiguration">[docs]</a>    <span class="nd">@debugmethod</span>
    <span class="k">def</span> <span class="nf">setToolConfiguration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets tool configuration from JSON dictionary</span>

<span class="sd">        :param config: JSON dictionary with tool configuration</span>
<span class="sd">        :type config: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>

<div class="viewcode-block" id="ImageWidget.toolConfiguration"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.toolConfiguration">[docs]</a>    <span class="k">def</span> <span class="nf">toolConfiguration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides tool configuration</span>

<span class="sd">        :returns: JSON dictionary with tool configuration</span>
<span class="sd">        :rtype: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.tool"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.tool">[docs]</a>    <span class="k">def</span> <span class="nf">tool</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provices tool from string</span>

<span class="sd">        :param tool: tool name</span>
<span class="sd">        :type tool: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__currenttool</span><span class="o">.</span><span class="n">alias</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>

<div class="viewcode-block" id="ImageWidget.updateEnergy"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateEnergy">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateEnergy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">energy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the beam energy</span>

<span class="sd">        :param energy: beam energy</span>
<span class="sd">        :type energy: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">energy</span> <span class="o">!=</span> <span class="n">energy</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">energy</span> <span class="o">=</span> <span class="n">energy</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">updateAISettings</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geometryChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateDetectorDistance"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateDetectorDistance">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateDetectorDistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the detector distance</span>

<span class="sd">        :param distance: detector distance</span>
<span class="sd">        :type distance: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">detdistance</span> <span class="o">!=</span> <span class="n">distance</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">detdistance</span> <span class="o">=</span> <span class="n">distance</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">updateAISettings</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geometryChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateBeamCenterX"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateBeamCenterX">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateBeamCenterX</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the beam center x</span>

<span class="sd">        :param x: beam center x</span>
<span class="sd">        :type x: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centerx</span> <span class="o">!=</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centerx</span> <span class="o">=</span> <span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">updateAISettings</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateCenter</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centerx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centery</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geometryChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateBeamCenterY"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateBeamCenterY">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateBeamCenterY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the beam center y</span>

<span class="sd">        :param y: beam center y</span>
<span class="sd">        :type y: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centery</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centery</span> <span class="o">=</span> <span class="n">y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">updateAISettings</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateCenter</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centerx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">centery</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geometryChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updatePixelSizeX"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updatePixelSizeX">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updatePixelSizeX</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the pixel x-size</span>

<span class="sd">        :param x: pixel x-size</span>
<span class="sd">        :type x: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">pixelsizex</span> <span class="o">!=</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">pixelsizex</span> <span class="o">=</span> <span class="n">x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">updateAISettings</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geometryChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updatePixelSizeY"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updatePixelSizeY">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updatePixelSizeY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the pixel y-size</span>

<span class="sd">        :param y: pixel y-size</span>
<span class="sd">        :type y: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">pixelsizey</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">pixelsizey</span> <span class="o">=</span> <span class="n">y</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__settings</span><span class="o">.</span><span class="n">updateAISettings</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geometryChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.updateDetectorROIs"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.updateDetectorROIs">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">updateDetectorROIs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rois</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the detector ROIs</span>

<span class="sd">        :param distance: json dictionary with detector ROIs</span>
<span class="sd">        :type distance: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">detrois</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">rois</span><span class="p">))</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">aliases</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">found</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">llabels</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">roilabels</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">llabels</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">detrois</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">detrois</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">found</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">found</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">cr</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                            <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cr</span><span class="p">)</span>
                            <span class="n">aliases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">detrois</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">found</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">cr</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cr</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                        <span class="n">coords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cr</span><span class="p">)</span>
                        <span class="n">aliases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="n">slabel</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">al</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">aliases</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">aliases</span><span class="p">[</span><span class="n">i</span><span class="p">:]))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">slabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">al</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">slabel</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">al</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">slabel</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">slabel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;__null__&quot;</span><span class="p">:</span>
            <span class="n">slabel</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># print(slabel)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">roilabels</span> <span class="o">!=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">slabel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roilabels</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">slabel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roiAliasesChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">roilabels</span><span class="p">)</span>

        <span class="n">oldcoords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;rois&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">roiCoords</span><span class="p">()</span>
        <span class="c1"># print(&quot;UPDATE %s&quot; % str(coords))</span>
        <span class="k">if</span> <span class="n">oldcoords</span> <span class="o">!=</span> <span class="n">coords</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateROIs</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">),</span> <span class="n">coords</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setToolScale"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setToolScale">[docs]</a>    <span class="k">def</span> <span class="nf">setToolScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get axes parameters</span>

<span class="sd">        :param position: start position of axes</span>
<span class="sd">        :type position: [:obj:`float`, :obj:`float`]</span>
<span class="sd">        :param scale: scale axes</span>
<span class="sd">        :type scale: [:obj:`float`, :obj:`float`]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setToolScale</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setViewRange"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setViewRange">[docs]</a>    <span class="k">def</span> <span class="nf">setViewRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rangelist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set view range values</span>

<span class="sd">        :param rangelist: xmin,ymin,xsize,ysize</span>
<span class="sd">        :type rangelist: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setViewRange</span><span class="p">(</span><span class="n">rangelist</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.viewRange"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.viewRange">[docs]</a>    <span class="k">def</span> <span class="nf">viewRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get view range values</span>

<span class="sd">        :returns: xmin,ymin,xsize,ysize</span>
<span class="sd">        :rtype rangelist: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.setMaximaPos"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setMaximaPos">[docs]</a>    <span class="k">def</span> <span class="nf">setMaximaPos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positionlist</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        sets maxima postions</span>

<span class="sd">        :param positionlist: [(x1, y1), ... , (xn, yn)]</span>
<span class="sd">        :type positionlist: :obj:`list` &lt; (float, float) &gt;</span>
<span class="sd">        :param offset: offset of position</span>
<span class="sd">        :type offset: [ :obj:`float`, :obj:`float`]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;maxima&#39;</span><span class="p">)</span><span class="o">.</span>\
            <span class="n">setMaximaPos</span><span class="p">(</span><span class="n">positionlist</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.setrgb"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setrgb">[docs]</a>    <span class="k">def</span> <span class="nf">setrgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets RGB on/off</span>

<span class="sd">        :param status: True for on and False for off</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># self.setTool(&quot;Intensity&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setrgb</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.rgb"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.rgb">[docs]</a>    <span class="k">def</span> <span class="nf">rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets RGB on/off</span>

<span class="sd">        :returns: True for on and False for off</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">rgb</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.setGradientColors"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setGradientColors">[docs]</a>    <span class="k">def</span> <span class="nf">setGradientColors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets gradientcolors on/off</span>

<span class="sd">        :param status: True for on and False for off</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># self.setTool(&quot;Intensity&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setGradientColors</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.gradientColors"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.gradientColors">[docs]</a>    <span class="k">def</span> <span class="nf">gradientColors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets gradientcolors on/off</span>

<span class="sd">        :returns: True for on and False for off</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">gradientColors</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.applyMask"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.applyMask">[docs]</a>    <span class="k">def</span> <span class="nf">applyMask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides apply mask flag</span>

<span class="sd">        :returns: True for apply mask</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__applymask</span></div>

<div class="viewcode-block" id="ImageWidget.setApplyMask"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setApplyMask">[docs]</a>    <span class="k">def</span> <span class="nf">setApplyMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">applymask</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets apply mask flag</span>

<span class="sd">        :params applymask: True for apply mask</span>
<span class="sd">        :type applymask: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__applymask</span> <span class="o">=</span> <span class="n">applymask</span></div>

<div class="viewcode-block" id="ImageWidget.maskValue"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.maskValue">[docs]</a>    <span class="k">def</span> <span class="nf">maskValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides high mask value</span>

<span class="sd">        :returns: high mask value</span>
<span class="sd">        :rtype: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__maskvalue</span></div>

<div class="viewcode-block" id="ImageWidget.setMaskValue"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setMaskValue">[docs]</a>    <span class="k">def</span> <span class="nf">setMaskValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskvalue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets high mask value</span>

<span class="sd">        :params maskvalue: high mask value</span>
<span class="sd">        :type maskvalue: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskvalue</span> <span class="o">=</span> <span class="n">maskvalue</span></div>

<div class="viewcode-block" id="ImageWidget.overflowValue"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.overflowValue">[docs]</a>    <span class="k">def</span> <span class="nf">overflowValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides overflow value</span>

<span class="sd">        :returns: overflow value</span>
<span class="sd">        :rtype: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowvalue</span></div>

<div class="viewcode-block" id="ImageWidget.setOverflowValue"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setOverflowValue">[docs]</a>    <span class="k">def</span> <span class="nf">setOverflowValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overflowvalue</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets overflow value</span>

<span class="sd">        :params overflowvalue: overflow value</span>
<span class="sd">        :type overflowvalue: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__overflowvalue</span> <span class="o">=</span> <span class="n">overflowvalue</span></div>

<div class="viewcode-block" id="ImageWidget.overflowValueIndices"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.overflowValueIndices">[docs]</a>    <span class="k">def</span> <span class="nf">overflowValueIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides overflow image value indices</span>

<span class="sd">        :returns: overflow image indices</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowValueIndices</span></div>

<div class="viewcode-block" id="ImageWidget.setOverflowValueIndices"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setOverflowValueIndices">[docs]</a>    <span class="k">def</span> <span class="nf">setOverflowValueIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overflowindices</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets overflow image indices</span>

<span class="sd">        :params overflowindices: overflow image  value indices</span>
<span class="sd">        :type overflowindices: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__overflowValueIndices</span> <span class="o">=</span> <span class="n">overflowindices</span></div>

<div class="viewcode-block" id="ImageWidget.maskIndices"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.maskIndices">[docs]</a>    <span class="k">def</span> <span class="nf">maskIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides mask image indices</span>

<span class="sd">        :returns: mask image indices</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__maskindices</span></div>

<div class="viewcode-block" id="ImageWidget.setMaskIndices"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setMaskIndices">[docs]</a>    <span class="k">def</span> <span class="nf">setMaskIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskindices</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets mask image indices</span>

<span class="sd">        :params maskindices: mask image indices</span>
<span class="sd">        :type maskindices: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskindices</span> <span class="o">=</span> <span class="n">maskindices</span></div>

<div class="viewcode-block" id="ImageWidget.maskValueIndices"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.maskValueIndices">[docs]</a>    <span class="k">def</span> <span class="nf">maskValueIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides mask image value indices</span>

<span class="sd">        :returns: mask image indices</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__maskValueIndices</span></div>

<div class="viewcode-block" id="ImageWidget.setMaskValueIndices"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setMaskValueIndices">[docs]</a>    <span class="k">def</span> <span class="nf">setMaskValueIndices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskindices</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets mask image indices</span>

<span class="sd">        :params maskindices: mask image  value indices</span>
<span class="sd">        :type maskindices: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskValueIndices</span> <span class="o">=</span> <span class="n">maskindices</span></div>

<div class="viewcode-block" id="ImageWidget.rangeWindowEnabled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.rangeWindowEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">rangeWindowEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provide info if range window enabled</span>

<span class="sd">        :returns: range window enabled</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">rangeWindowEnabled</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.imageName"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.imageName">[docs]</a>    <span class="k">def</span> <span class="nf">imageName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provide the current image name</span>

<span class="sd">        :returns: image name</span>
<span class="sd">        :rtype: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__imagename</span></div>

<div class="viewcode-block" id="ImageWidget.rangeWindowScale"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.rangeWindowScale">[docs]</a>    <span class="k">def</span> <span class="nf">rangeWindowScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provide info range window scale</span>

<span class="sd">        :returns: range window scale</span>
<span class="sd">        :rtype: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">rangeWindowScale</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageWidget.setLevelMode"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.setLevelMode">[docs]</a>    <span class="k">def</span> <span class="nf">setLevelMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">levelmode</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets levelmode</span>

<span class="sd">        :param levelmode: level mode, i.e. `mono` or `rgba`</span>
<span class="sd">        :type levelmode: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">setLevelMode</span><span class="p">(</span><span class="n">levelmode</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageWidget.levelMode"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageWidget.ImageWidget.levelMode">[docs]</a>    <span class="k">def</span> <span class="nf">levelMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets level mode</span>

<span class="sd">        :returns: level mode, i.e. `mono` or `rgba`</span>
<span class="sd">        :rtype: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaywidget</span><span class="o">.</span><span class="n">levelMode</span><span class="p">()</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">LaVue (latest) documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017 DESY, Jan Kotanski &lt;jkotan@mail.desy.de&gt;, Christoph Rosemann &lt;christoph.rosemann@desy.de&gt; 

GNU GENERAL PUBLIC LICENSE, version 2.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>