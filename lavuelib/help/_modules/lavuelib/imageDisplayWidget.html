

<!doctype html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>lavuelib.imageDisplayWidget &#8212; LaVue 2.83.2 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bizstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">LaVue 2.83.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">lavuelib.imageDisplayWidget</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for lavuelib.imageDisplayWidget</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright (C) 2017  DESY, Christoph Rosemann, Notkestr. 85, D-22607 Hamburg</span>
<span class="c1">#</span>
<span class="c1"># lavue is an image viewing program for photon science imaging detectors.</span>
<span class="c1"># Its usual application is as a live viewer using hidra as data source.</span>
<span class="c1">#</span>
<span class="c1"># This program is free software; you can redistribute it and/or</span>
<span class="c1"># modify it under the terms of the GNU General Public License</span>
<span class="c1"># as published by the Free Software Foundation in  version 2</span>
<span class="c1"># of the License.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program; if not, write to the Free Software</span>
<span class="c1"># Foundation, Inc., 51 Franklin Street, Fifth Floor,</span>
<span class="c1"># Boston, MA  02110-1301, USA.</span>
<span class="c1">#</span>
<span class="c1"># Authors:</span>
<span class="c1">#     Christoph Rosemann &lt;christoph.rosemann@desy.de&gt;</span>
<span class="c1">#     Jan Kotanski &lt;jan.kotanski@desy.de&gt;</span>
<span class="c1">#</span>

<span class="sd">&quot;&quot;&quot; image display widget &quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">pyqtgraph</span> <span class="k">as</span> <span class="nn">_pg</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="kn">import</span> <span class="n">QtWidgets</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pyqtgraph</span> <span class="kn">import</span> <span class="n">QtGui</span> <span class="k">as</span> <span class="n">QtWidgets</span>


<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">axesDialog</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">memoExportDialog</span>


<span class="n">_VMAJOR</span><span class="p">,</span> <span class="n">_VMINOR</span><span class="p">,</span> <span class="n">_VPATCH</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">__version__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[:</span><span class="mi">3</span><span class="p">]</span> \
    <span class="k">if</span> <span class="n">_pg</span><span class="o">.</span><span class="n">__version__</span> <span class="k">else</span> <span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">_NPATCH</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_VPATCH</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">_NPATCH</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">_PQGVER</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_VMAJOR</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">_VMINOR</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="n">_NPATCH</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;lavue&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="SafeImageItem"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.SafeImageItem">[docs]</a><span class="k">class</span> <span class="nc">SafeImageItem</span><span class="p">(</span><span class="n">_pg</span><span class="o">.</span><span class="n">ImageItem</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot; Image item which caught exceptions in paint&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param args: ImageItem parameters list</span>
<span class="sd">        :type args: :obj:`list` &lt; :obj:`any`&gt;</span>
<span class="sd">        :param kargs:  ImageItem parameter dictionary</span>
<span class="sd">        :type kargs: :obj:`dict` &lt; :obj:`str`, :obj:`any`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_pg</span><span class="o">.</span><span class="n">ImageItem</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>

<div class="viewcode-block" id="SafeImageItem.paint"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.SafeImageItem.paint">[docs]</a>    <span class="k">def</span> <span class="nf">paint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; safe paint method</span>

<span class="sd">        :param p: painter</span>
<span class="sd">        :type p: :class:`PyQt5.QtGui.QPainter`</span>
<span class="sd">        :param args: ImageItem parameters list</span>
<span class="sd">        :type args: :obj:`list` &lt; :obj:`any`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_pg</span><span class="o">.</span><span class="n">ImageItem</span><span class="o">.</span><span class="n">paint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="AxesParameters"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.AxesParameters">[docs]</a><span class="k">class</span> <span class="nc">AxesParameters</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; axes parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#: (:obj:`bool`) enabled flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`tuple` &lt;:obj:`float`, :obj:`float`&gt; ) image scale (x,y)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`tuple` &lt;:obj:`float`, :obj:`float`&gt; )</span>
        <span class="c1">#    position of the first pixel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`str`) label of x-axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xtext</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`str`) label of y-axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ytext</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`str`) units of x-axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xunits</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`str`) units of y-axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yunits</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="IntensityParameters"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.IntensityParameters">[docs]</a><span class="k">class</span> <span class="nc">IntensityParameters</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; intensity parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: (:obj:`bool`) do background substraction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dobkgsubtraction</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`bool`) do brightfield substraction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dobfsubtraction</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`bool`) calculate statistics without scaling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statswoscaling</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1">#: (:obj:`str`) intensity scaling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scaling</span> <span class="o">=</span> <span class="s2">&quot;sqrt&quot;</span></div>


<div class="viewcode-block" id="TransformationParameters"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.TransformationParameters">[docs]</a><span class="k">class</span> <span class="nc">TransformationParameters</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; transformation parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: (:obj:`bool`) transpose coordinates flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`bool`) left-right flip coordinates flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftrightflip</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`bool`)  up-down flip coordinates flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updownflip</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`bool`) transpose coordinates flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orgtranspose</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="ImageDisplayWidget"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget">[docs]</a><span class="k">class</span> <span class="nc">ImageDisplayWidget</span><span class="p">(</span><span class="n">_pg</span><span class="o">.</span><span class="n">GraphicsLayoutWidget</span><span class="p">):</span>

    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) aspect locked toggled signal</span>
    <span class="n">aspectLockedToggled</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) mouse position changed signal</span>
    <span class="n">mouseImagePositionChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">()</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) mouse double clicked</span>
    <span class="n">mouseImageDoubleClicked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
    <span class="c1">#: (:class:`pyqtgraph.QtCore.pyqtSignal`) mouse single clicked</span>
    <span class="n">mouseImageSingleClicked</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor</span>

<span class="sd">        :param parent: parent object</span>
<span class="sd">        :type parent: :class:`pyqtgraph.QtCore.QObject`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_pg</span><span class="o">.</span><span class="n">GraphicsLayoutWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="c1">#: (:class:`PyQt5.QtWidgets.QLayout`) the main layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ci</span>

        <span class="c1">#: (:class:`lavuelib.imageDisplayWidget.AxesParameters`)</span>
        <span class="c1">#:            axes parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span> <span class="o">=</span> <span class="n">AxesParameters</span><span class="p">()</span>
        <span class="c1">#: (:class:`lavuelib.imageDisplayWidget.AxesParameters`)</span>
        <span class="c1">#:            down-sampling and range window axes parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span> <span class="o">=</span> <span class="n">AxesParameters</span><span class="p">()</span>
        <span class="c1">#: (:class:`lavuelib.imageDisplayWidget.AxesParameters`)</span>
        <span class="c1">#:            tool axes parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span> <span class="o">=</span> <span class="n">AxesParameters</span><span class="p">()</span>

        <span class="c1">#: (:class:`lavuelib.imageDisplayWidget.IntensityParameters`)</span>
        <span class="c1">#:                  intensity parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span> <span class="o">=</span> <span class="n">IntensityParameters</span><span class="p">()</span>
        <span class="c1">#: (:class:`lavuelib.imageDisplayWidget.TransformationParameters`)</span>
        <span class="c1">#:                  intensity parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span> <span class="o">=</span> <span class="n">TransformationParameters</span><span class="p">()</span>

        <span class="c1">#: (:class:`numpy.ndarray`) data to displayed in 2d widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:class:`numpy.ndarray`) raw data to cut plots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rawdata</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#: (:obj:`list` &lt; :class:`pyqtgraph.ImageItem` &gt;) image item list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__images</span> <span class="o">=</span> <span class="p">[</span><span class="n">SafeImageItem</span><span class="p">(),</span> <span class="n">SafeImageItem</span><span class="p">(),</span> <span class="n">SafeImageItem</span><span class="p">()]</span>
        <span class="c1">#: (:obj:`list` &lt; :class:`pyqtgraph.ImageItem` &gt;) mask image item list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span> <span class="o">=</span> <span class="p">[</span><span class="n">SafeImageItem</span><span class="p">(),</span> <span class="n">SafeImageItem</span><span class="p">(),</span> <span class="n">SafeImageItem</span><span class="p">()]</span>
        <span class="c1">#: (:class:`pyqtgraph.ImageItem`) image item</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1">#: (:class:`pyqtgraph.ViewBox`) viewbox item</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__layout</span><span class="o">.</span><span class="n">addViewBox</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="c1">#: (:obj:`float`) current floar x-position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xfdata</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`float`) current floar y-position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__yfdata</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`float`) current x-position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__xdata</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`float`) current y-position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ydata</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#: (:obj:`bool`) auto display level flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__autodisplaylevels</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="c1">#: (:obj:`bool`) auto down sample</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__autodownsample</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1">#: ([:obj:`float`, :obj:`float`]) minimum and maximum intensity levels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
        <span class="c1">#: (:obj: `list` &lt; [:obj:`float`, :obj:`float`] &gt;) channel levels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__channellevels</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1">#: (:obj:`bool`) lock for double click</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__doubleclicklock</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`bool`) rgb on flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rgb</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`tuple` &lt;:obj:`int`&gt;) mask color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="c1">#: (:obj:`bool`) gradient colors flag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__gradientcolors</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#: (:obj:`str`) levelmode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__levelmode</span> <span class="o">=</span> <span class="s1">&#39;mono&#39;</span>
        <span class="c1">#: (:obj:`dict` &lt; :obj:`str`, :obj:`DisplayExtension` &gt;)</span>
        <span class="c1">#          extension dictionary with name keys</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">#: (:class:`PyQt5.QtWidgets.QAction`) set aspect ration locked action</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span>
            <span class="s2">&quot;Set Aspect Locked&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_PQGVER</span> <span class="o">&lt;</span> <span class="mi">1009</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="p">)</span>

        <span class="c1">#: (:class:`PyQt5.QtWidgets.QAction`) view one to one pixel action</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewonetoone</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span>
            <span class="s2">&quot;View 1:1 pixels&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewonetoone</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_oneToOneRange</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_PQGVER</span> <span class="o">&lt;</span> <span class="mi">1009</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewonetoone</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewonetoone</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">invertCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mouseCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">linkCombo</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">autoPanCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visibleOnlyCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">invertCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mouseCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">linkCombo</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">autoPanCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">visibleOnlyCheck</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">menu</span><span class="o">.</span><span class="n">ctrl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

        <span class="c1">#: (:class:`pyqtgraph.AxisItem`) left axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">AxisItem</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

        <span class="c1">#: (:class:`pyqtgraph.AxisItem`) bottom axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span> <span class="o">=</span> <span class="n">_pg</span><span class="o">.</span><span class="n">AxisItem</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">linkToView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">linkToView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">sigMouseMoved</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mouse_position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">sigMouseClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mouse_click</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">emitAspectLockedToggled</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">showExportDialog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">showExportDialog</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span>
            <span class="n">memoExportDialog</span><span class="o">.</span><span class="n">GraphicsScene_showExportDialog</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">contextMenu</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">showExportDialog</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCursor</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QCursor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CrossCursor</span><span class="p">))</span>

<div class="viewcode-block" id="ImageDisplayWidget.setOverflowColor"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setOverflowColor">[docs]</a>    <span class="k">def</span> <span class="nf">setOverflowColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets item color</span>

<span class="sd">        :param color: json list of overflow color</span>
<span class="sd">        :type color: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># print(&quot;COL&quot;, color)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">color</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.viewbox"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.viewbox">[docs]</a>    <span class="k">def</span> <span class="nf">viewbox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;provides viewbox</span>
<span class="sd">        :rtype: :class:`pyqtgraph.ViewBox`</span>
<span class="sd">        :returns: viewbox</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.addExtensions"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.addExtensions">[docs]</a>    <span class="k">def</span> <span class="nf">addExtensions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extlist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;provides viewbox</span>
<span class="sd">        :param extlist: extension list</span>
<span class="sd">        :type extlist: :obj:`list` &lt; :class:`DisplayExtension` &gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">excls</span> <span class="ow">in</span> <span class="n">extlist</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">excls</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="p">[</span><span class="n">ext</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ext</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.extension"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.extension">[docs]</a>    <span class="k">def</span> <span class="nf">extension</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;provides viewbox</span>
<span class="sd">        :param name: extension name</span>
<span class="sd">        :type name: :obj:`str`</span>
<span class="sd">        :rtype: :class:`DisplayExtension`</span>
<span class="sd">        :returns: display extension</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="p">[</span><span class="n">name</span><span class="p">]</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.extensions"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.extensions">[docs]</a>    <span class="k">def</span> <span class="nf">extensions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;provides extension names</span>

<span class="sd">        :rtype: :obj:`list`</span>
<span class="sd">        :returns: extension names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setAspectLocked"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setAspectLocked">[docs]</a>    <span class="k">def</span> <span class="nf">setAspectLocked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flag</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sets aspectLocked</span>

<span class="sd">        :param status: state to set</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        :returns: old state</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>
        <span class="n">oldflag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;aspectLocked&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">setAspectLocked</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">oldflag</span></div>

    <span class="k">def</span> <span class="nf">_oneToOneRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set one to one range</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">pixelSize</span><span class="p">()</span>
        <span class="n">currange</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()</span>
        <span class="n">xrg</span> <span class="o">=</span> <span class="n">currange</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">currange</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">yrg</span> <span class="o">=</span> <span class="n">currange</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">currange</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span>
                <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">xrg</span> <span class="o">*</span> <span class="n">ps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">yrg</span> <span class="o">*</span> <span class="n">ps</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span>
                <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">xrg</span> <span class="o">*</span> <span class="n">ps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">yrg</span> <span class="o">*</span> <span class="n">ps</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span>
                <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">xrg</span> <span class="o">*</span> <span class="n">ps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">yrg</span> <span class="o">*</span> <span class="n">ps</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setaspectlocked</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="ImageDisplayWidget.setViewRange"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setViewRange">[docs]</a>    <span class="k">def</span> <span class="nf">setViewRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rangelist</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set view range values</span>

<span class="sd">        :param rangelist: xmin,ymin,xsize,ysize</span>
<span class="sd">        :type rangelist: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lims</span> <span class="o">=</span> <span class="n">rangelist</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lims</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">lims</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">fl</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">lm</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">))</span> <span class="k">for</span> <span class="n">lm</span> <span class="ow">in</span> <span class="n">lims</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="o">*</span><span class="n">fl</span><span class="p">),</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.viewRange"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.viewRange">[docs]</a>    <span class="k">def</span> <span class="nf">viewRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; get view range values</span>

<span class="sd">        :returns: xmin,ymin,xsize,ysize</span>
<span class="sd">        :rtype rangelist: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()</span>
        <span class="n">vr0</span> <span class="o">=</span> <span class="n">vr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">vr1</span> <span class="o">=</span> <span class="n">vr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">vr0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vr1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vr0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vr0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vr1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vr1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span></div>

    <span class="k">def</span> <span class="nf">__setScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                   <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">wrenabled</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wrupdate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set axes scales</span>

<span class="sd">        :param position: start position of axes</span>
<span class="sd">        :type position: [:obj:`float`, :obj:`float`]</span>
<span class="sd">        :param scale: scale axes</span>
<span class="sd">        :type scale: [:obj:`float`, :obj:`float`]</span>
<span class="sd">        :param update: update scales on image</span>
<span class="sd">        :type update: :obj:`bool`</span>
<span class="sd">        :param tool: update tool scale</span>
<span class="sd">        :type tool: :obj:`bool`</span>
<span class="sd">        :param force: force rescaling</span>
<span class="sd">        :type force: :obj:`bool`</span>
<span class="sd">        :param wrenabled: down-sampling rescale</span>
<span class="sd">        :type wrenabled: :obj:`bool`</span>
<span class="sd">        :param wrupdate: update window ranges</span>
<span class="sd">        :type wrupdate: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">wrenabled</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">wrenabled</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wrenabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span>
        <span class="k">if</span> <span class="n">tool</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span>

        <span class="n">anyupdate</span> <span class="o">=</span> <span class="n">update</span> <span class="ow">or</span> <span class="n">wrenabled</span>
        <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setLabels</span><span class="p">(</span><span class="n">axes</span><span class="o">.</span><span class="n">xtext</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">ytext</span><span class="p">,</span>
                             <span class="n">axes</span><span class="o">.</span><span class="n">xunits</span><span class="p">,</span> <span class="n">axes</span><span class="o">.</span><span class="n">yunits</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="o">==</span> <span class="n">position</span> <span class="ow">and</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="n">scale</span> <span class="ow">and</span> \
               <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">if</span> <span class="n">wrupdate</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">tool</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
            <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">resetTransform</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">resetTransform</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">anyupdate</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_imagescale</span><span class="p">(</span><span class="o">*</span><span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_imagescale</span><span class="p">(</span>
                    <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_imagescale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">iid</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">anyupdate</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">orgtranspose</span> <span class="ow">and</span> <span class="n">wrenabled</span><span class="p">:</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span>
                        <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span>
                        <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span><span class="p">:</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="o">*</span><span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="o">*</span><span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span>
                        <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span>
                        <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoRange</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_imagescale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set image scale x,y</span>

<span class="sd">        :param x: x pixel coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y pixel coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">iid</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tr</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">transform</span><span class="p">()</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">image</span><span class="o">.</span><span class="n">setTransform</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">setTransform</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<div class="viewcode-block" id="ImageDisplayWidget.setToolScale"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setToolScale">[docs]</a>    <span class="k">def</span> <span class="nf">setToolScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set axes scales</span>

<span class="sd">        :param position: start position of axes</span>
<span class="sd">        :type position: [:obj:`float`, :obj:`float`]</span>
<span class="sd">        :param scale: scale axes</span>
<span class="sd">        :type scale: [:obj:`float`, :obj:`float`]</span>
<span class="sd">        :param update: update scales on image</span>
<span class="sd">        :type updatescale: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.scale"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.scale">[docs]</a>    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">noNone</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scale and position of the axes</span>

<span class="sd">        :param useraxes: use user scaling</span>
<span class="sd">        :type useraxes: :obj:`bool`</span>
<span class="sd">        :param noNone: return values without None</span>
<span class="sd">        :type noNone: :obj:`bool`</span>
<span class="sd">        :rtype: [int, int, int, int]</span>
<span class="sd">        :returns: [posx, posy, scalex, scaley]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">noNone</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
           <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">useraxes</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> \
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span> \
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> \
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span> \
                <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span>

        <span class="k">return</span> <span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="k">def</span> <span class="nf">__resetScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; reset axes scales</span>

<span class="sd">        :param tool: update tool scale</span>
<span class="sd">        :type tool: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tool</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span>

        <span class="k">for</span> <span class="n">iid</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">resetTransform</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">resetTransform</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_imagescale</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">iid</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoRange</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setLabels</span><span class="p">()</span>

<div class="viewcode-block" id="ImageDisplayWidget.updateImage"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.updateImage">[docs]</a>    <span class="k">def</span> <span class="nf">updateImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rawimg</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maskimg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates the image to display</span>

<span class="sd">        :param img: 2d image array</span>
<span class="sd">        :type img: :class:`numpy.ndarray`</span>
<span class="sd">        :param rawimg: 2d raw image array</span>
<span class="sd">        :type rawimg: :class:`numpy.ndarray`</span>
<span class="sd">        :param maskarray: 2d color mask image array</span>
<span class="sd">        :type maskarray: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">img</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gradientcolors</span><span class="p">:</span>
                    <span class="c1"># self.__image.setLookupTable(None)</span>
                    <span class="c1"># if img.dtype.kind == &#39;f&#39; and np.isnan(img.min()):</span>
                    <span class="c1">#     img = np.nan_to_num(img)</span>
                    <span class="k">for</span> <span class="n">iid</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">iid</span> <span class="o">&lt;</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">img</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">iid</span><span class="p">])</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                                <span class="n">image</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__channellevels</span> <span class="ow">and</span> \
                                   <span class="bp">self</span><span class="o">.</span><span class="n">levelMode</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;mono&#39;</span><span class="p">:</span>
                                    <span class="c1"># print(&quot;SetImg: 1 -  RGB with RGB levels &quot;</span>
                                    <span class="c1">#       &quot;(3 mono grad  separate images)&quot;)</span>
                                    <span class="n">image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                                        <span class="n">img</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">iid</span><span class="p">],</span>
                                        <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__channellevels</span><span class="p">[</span><span class="n">iid</span><span class="p">],</span>
                                        <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> \
                                        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> \
                                        <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="c1"># print(&quot;SetImg: 1b - RGB with MONO levels&quot;</span>
                                    <span class="c1">#       &quot; (3 mono grad separate images)&quot;)</span>
                                    <span class="n">image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                                        <span class="n">img</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">iid</span><span class="p">],</span>
                                        <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">,</span>
                                        <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="c1"># print(&quot;SetImg: 1c - RGB with w/olevels &quot;</span>
                                    <span class="c1">#       &quot;(3 mono grad separate images)&quot;)</span>
                                    <span class="n">image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                                        <span class="n">img</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">iid</span><span class="p">],</span>
                                        <span class="c1"># levels=[[0,255], [0, 255], [0, 255]],</span>
                                        <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">maskimg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="c1"># print(maskimg)</span>
                                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                                        <span class="c1"># print(self.__overflowcolor)</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                                            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                                                <span class="n">maskimg</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
                                                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                <span class="n">maskimg</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
                                                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                                <span class="n">maskimg</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">iid</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
                                                <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                                            <span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
                                            <span class="n">levels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span>
                                            <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_hideimages</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                    <span class="c1"># if uncomented the gradientColors does not work</span>
                    <span class="c1"># self.__image.setLookupTable(None)</span>
                    <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">kind</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">min</span><span class="p">()):</span>
                        <span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__channellevels</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">levelMode</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;mono&#39;</span><span class="p">:</span>
                        <span class="c1"># print(&quot;SetImg: 2a -  RGB with RGB levels&quot;)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                            <span class="n">img</span><span class="p">,</span>
                            <span class="c1"># lut=None,</span>
                            <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__channellevels</span><span class="p">,</span>
                            <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> \
                            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># print(&quot;SetImg: 2b -  RGB with MONO levels &quot;)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                            <span class="n">img</span><span class="p">,</span>
                            <span class="c1"># lut=None,</span>
                            <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">,</span>
                            <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># print(&quot;SetImg: 2c  -  RGB with without levels&quot;)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                            <span class="n">img</span><span class="p">,</span>
                            <span class="c1"># lut=None,</span>
                            <span class="c1"># levels=[[0,255], [0, 255], [0, 255]],</span>
                            <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">maskimg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># print(maskimg)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                            <span class="c1"># print(self.__overflowcolor)</span>
                            <span class="n">smaskimg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">maskimg</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
                            <span class="n">smaskimg</span><span class="p">[</span><span class="n">smaskimg</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                                    <span class="n">smaskimg</span><span class="o">.</span><span class="n">T</span>
                                    <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                    <span class="n">smaskimg</span><span class="o">.</span><span class="n">T</span>
                                    <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                    <span class="n">smaskimg</span><span class="o">.</span><span class="n">T</span>
                                    <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                                <span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
                                <span class="n">levels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span>
                                <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__autodisplaylevels</span>
                  <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                  <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_hideimages</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="c1"># print(&quot;SetImg: 3&quot;)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                    <span class="n">img</span><span class="p">,</span> <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">,</span>
                    <span class="n">autoDownsample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__autodownsample</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__autodisplaylevels</span>
                  <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span>
                  <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_hideimages</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="c1"># print(&quot;SetImg: 4&quot;)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                    <span class="n">img</span><span class="p">,</span> <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">autoDownsample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__autodownsample</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_hideimages</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                <span class="c1"># print(&quot;SetImg: 5&quot;)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                    <span class="n">img</span><span class="p">,</span> <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">,</span>
                    <span class="n">autoDownsample</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__autodownsample</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">img</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">maskimg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># print(maskimg)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
                        <span class="c1"># print(self.__overflowcolor)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
                                <span class="n">maskimg</span><span class="o">.</span><span class="n">T</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="n">maskimg</span><span class="o">.</span><span class="n">T</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="n">maskimg</span><span class="o">.</span><span class="n">T</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">__overflowcolor</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                            <span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
                            <span class="n">levels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span>
                            <span class="n">autoLevels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="c1"># print(str(e))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__data</span> <span class="o">=</span> <span class="n">img</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span> <span class="o">=</span> <span class="n">rawimg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse_position</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.currentIntensity"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.currentIntensity">[docs]</a>    <span class="k">def</span> <span class="nf">currentIntensity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides intensity for current mouse position</span>

<span class="sd">        :returns: (x position, y position, pixel intensity,</span>
<span class="sd">                   x position, y position)</span>
<span class="sd">        :rtype: (float, float, float, float, float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xfdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">yfdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">enabled</span><span class="p">():</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">coordinates</span><span class="p">()</span>
                <span class="n">xfdata</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">yfdata</span> <span class="o">=</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">xfdata</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">yfdata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xfdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__xfdata</span>
            <span class="n">yfdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__yfdata</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span><span class="p">:</span>
                    <span class="n">xf</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">xfdata</span><span class="p">)</span>
                    <span class="n">yf</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">yfdata</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">yf</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">xfdata</span><span class="p">)</span>
                    <span class="n">xf</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">yfdata</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">xf</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">yf</span> <span class="o">&gt;=</span> <span class="mi">0</span> \
                   <span class="ow">and</span> <span class="n">xf</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> \
                   <span class="ow">and</span> <span class="n">yf</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">intensity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span><span class="p">[</span><span class="n">xf</span><span class="p">,</span> <span class="n">yf</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">intensity</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">intensity</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">intensity</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">xfdata</span><span class="p">,</span> <span class="n">yfdata</span><span class="p">,</span> <span class="n">intensity</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ydata</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.scalingLabel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.scalingLabel">[docs]</a>    <span class="k">def</span> <span class="nf">scalingLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling label</span>

<span class="sd">        :returns:  scaling label</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ilabel</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">enabled</span><span class="p">():</span>
                <span class="n">ilabel</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">scalingLabel</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ilabel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scaling</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">scaling</span> \
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">statswoscaling</span> <span class="k">else</span> <span class="s2">&quot;linear&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobkgsubtraction</span> <span class="ow">and</span> \
               <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobfsubtraction</span><span class="p">:</span>
                <span class="n">ilabel</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(intensity-background)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">scaling</span> <span class="k">if</span> <span class="n">scaling</span> <span class="o">!=</span> <span class="s2">&quot;linear&quot;</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobkgsubtraction</span> <span class="ow">and</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobfsubtraction</span><span class="p">):</span>
                <span class="n">ilabel</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">((intensity-DF)/(BF-DF))&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">scaling</span> <span class="k">if</span> <span class="n">scaling</span> <span class="o">!=</span> <span class="s2">&quot;linear&quot;</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobkgsubtraction</span> <span class="ow">and</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobfsubtraction</span><span class="p">):</span>
                <span class="n">ilabel</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(intensity/BF)&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">scaling</span> <span class="k">if</span> <span class="n">scaling</span> <span class="o">!=</span> <span class="s2">&quot;linear&quot;</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">scaling</span> <span class="o">==</span> <span class="s2">&quot;linear&quot;</span><span class="p">:</span>
                    <span class="n">ilabel</span> <span class="o">=</span> <span class="s2">&quot;intensity&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ilabel</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(intensity)&quot;</span> <span class="o">%</span> <span class="n">scaling</span>
        <span class="k">return</span> <span class="n">ilabel</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.scaling"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.scaling">[docs]</a>    <span class="k">def</span> <span class="nf">scaling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaling type</span>

<span class="sd">        :returns:  scaling type</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">scaling</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.axesunits"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.axesunits">[docs]</a>    <span class="k">def</span> <span class="nf">axesunits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return axes units</span>
<span class="sd">        :returns: x,y units</span>
<span class="sd">        :rtype: (:obj:`str`, :obj:`str`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xunits</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">yunits</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.axestext"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.axestext">[docs]</a>    <span class="k">def</span> <span class="nf">axestext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return axes text</span>
<span class="sd">        :returns: x,y text</span>
<span class="sd">        :rtype: (:obj:`str`, :obj:`str`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xtext</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">ytext</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.scaledxy"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.scaledxy">[docs]</a>    <span class="k">def</span> <span class="nf">scaledxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaled x,y positions</span>

<span class="sd">        :param x: x pixel coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y pixel coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        :param useraxes: use user scaling</span>
<span class="sd">        :type useraxes: :obj:`bool`</span>
<span class="sd">        :returns: scaled x,y position</span>
<span class="sd">        :rtype: (float, float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">txdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">tydata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">and</span> <span class="n">useraxes</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">txdata</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tydata</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">txdata</span> <span class="o">=</span> <span class="n">txdata</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">tydata</span> <span class="o">=</span> <span class="n">tydata</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">txdata</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tydata</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">txdata</span><span class="p">,</span> <span class="n">tydata</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.descaledxy"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.descaledxy">[docs]</a>    <span class="k">def</span> <span class="nf">descaledxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">useraxes</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides scaled x,y positions</span>

<span class="sd">        :param x: x pixel coordinate</span>
<span class="sd">        :type x: float</span>
<span class="sd">        :param y: y pixel coordinate</span>
<span class="sd">        :type y: float</span>
<span class="sd">        :param useraxes: use user scaling</span>
<span class="sd">        :type useraxes: :obj:`bool`</span>
<span class="sd">        :returns: scaled x,y position</span>
<span class="sd">        :rtype: (float, float)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">txdata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">tydata</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">and</span> <span class="n">useraxes</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">txdata</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tydata</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">txdata</span> <span class="o">=</span> <span class="n">txdata</span> <span class="o">/</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">tydata</span> <span class="o">=</span> <span class="n">tydata</span> <span class="o">/</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">txdata</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">tydata</span> <span class="o">=</span> <span class="n">y</span> <span class="o">/</span> <span class="n">axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">txdata</span><span class="p">,</span> <span class="n">tydata</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.mouse_position"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.mouse_position">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">mouse_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates image widget after mouse position change</span>

<span class="sd">        :param event: mouse move event</span>
<span class="sd">        :type event: :class:`pyqtgraph.QtCore.QEvent`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">mousePoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">mapFromScene</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__xdata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__ydata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__ydata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__xdata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__xfdata</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__xdata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__yfdata</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__ydata</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">enabled</span><span class="p">():</span>
                    <span class="n">ext</span><span class="o">.</span><span class="n">mouse_position</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ydata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImagePositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="c1"># print(&quot;Warning: %s&quot; % str(e))</span>
            <span class="k">pass</span></div>

    <span class="k">def</span> <span class="nf">__setLabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xtext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ytext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xunits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">yunits</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets labels and units</span>

<span class="sd">        :param xtext: x-label text</span>
<span class="sd">        :param type: :obj:`str`</span>
<span class="sd">        :param ytext: y-label text</span>
<span class="sd">        :param type: :obj:`str`</span>
<span class="sd">        :param xunits: x-units text</span>
<span class="sd">        :param type: :obj:`str`</span>
<span class="sd">        :param yunits: y-units text</span>
<span class="sd">        :param type: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">autoSIPrefix</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">autoSIPrefix</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">xtext</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">xunits</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">ytext</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">yunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">xunits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">yunits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">xtext</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ytext</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">ytext</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">yunits</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">xtext</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">xunits</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">yunits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">xunits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">ytext</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bottomaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">xtext</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__leftaxis</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="ImageDisplayWidget.mouse_click"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.mouse_click">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">mouse_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates image widget after mouse click</span>

<span class="sd">        :param event: mouse click event</span>
<span class="sd">        :type event: :class:`pyqtgraph.QtCore.QEvent`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">mousePoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image</span><span class="o">.</span><span class="n">mapFromScene</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">scenePos</span><span class="p">())</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span><span class="p">:</span>
            <span class="n">xdata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
            <span class="n">ydata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ydata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">x</span><span class="p">()</span>
            <span class="n">xdata</span> <span class="o">=</span> <span class="n">mousePoint</span><span class="o">.</span><span class="n">y</span><span class="p">()</span>

        <span class="c1"># if double click: fix mouse crosshair</span>
        <span class="c1"># another double click releases the crosshair again</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">double</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">enabled</span><span class="p">():</span>
                    <span class="n">ext</span><span class="o">.</span><span class="n">mouse_doubleclick</span><span class="p">(</span>
                        <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__doubleclicklock</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImageDoubleClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">enabled</span><span class="p">():</span>
                    <span class="n">ext</span><span class="o">.</span><span class="n">mouse_click</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseImageSingleClicked</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setAutoLevels"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setAutoLevels">[docs]</a>    <span class="k">def</span> <span class="nf">setAutoLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autolevels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets auto levels</span>

<span class="sd">        :param autolevels: auto levels enabled</span>
<span class="sd">        :type autolevels: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">autolevels</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__autodisplaylevels</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__autodisplaylevels</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setAutoDownSample"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setAutoDownSample">[docs]</a>    <span class="k">def</span> <span class="nf">setAutoDownSample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">autodownsample</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets auto levels</span>

<span class="sd">        :param autolevels: auto down sample enabled</span>
<span class="sd">        :type autolevels: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">autodownsample</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__autodownsample</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__autodownsample</span> <span class="o">=</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setDisplayMinLevel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setDisplayMinLevel">[docs]</a>    <span class="k">def</span> <span class="nf">setDisplayMinLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets minimum intensity level</span>

<span class="sd">        :param level: minimum intensity</span>
<span class="sd">        :type level: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">level</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setDisplayMaxLevel"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setDisplayMaxLevel">[docs]</a>    <span class="k">def</span> <span class="nf">setDisplayMaxLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets maximum intensity level</span>

<span class="sd">        :param level: maximum intensity</span>
<span class="sd">        :type level: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__displaylevels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">level</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setDisplayChannelLevels"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setDisplayChannelLevels">[docs]</a>    <span class="k">def</span> <span class="nf">setDisplayChannelLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets maximum intensity levels</span>

<span class="sd">        :param levels: channel intensity levels</span>
<span class="sd">        :type levels: :obj:`list` &lt; (:obj`float`:, :obj`float`:)&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">levels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__channellevels</span> <span class="o">=</span> <span class="n">levels</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setDoubleClickLock"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setDoubleClickLock">[docs]</a>    <span class="k">def</span> <span class="nf">setDoubleClickLock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets double click lock</span>
<span class="sd">        :param status: status flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__doubleclicklock</span> <span class="o">=</span> <span class="n">status</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setSubWidgets"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setSubWidgets">[docs]</a>    <span class="k">def</span> <span class="nf">setSubWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set subwidget properties</span>

<span class="sd">        :param parameters: tool parameters</span>
<span class="sd">        :type parameters: :class:`lavuelib.toolWidget.ToolParameters`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rescale</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">doreset</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">doreset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">scale</span>
            <span class="c1"># self.__wraxes.enabled = parameters.scale</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">toolscale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doreset</span> <span class="o">=</span> <span class="n">doreset</span> <span class="ow">or</span> <span class="n">parameters</span><span class="o">.</span><span class="n">toolscale</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">parameters</span><span class="o">.</span><span class="n">toolscale</span><span class="p">:</span>
                <span class="n">doreset</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">rescale</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="n">parameters</span><span class="o">.</span><span class="n">toolscale</span>

        <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">ext</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">doreset</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__resetScale</span><span class="p">(</span><span class="n">tool</span><span class="o">=</span><span class="n">parameters</span><span class="o">.</span><span class="n">toolscale</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">rescale</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">or</span> <span class="n">rescale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">rescale</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parameters</span><span class="o">.</span><span class="n">toolscale</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.emitAspectLockedToggled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.emitAspectLockedToggled">[docs]</a>    <span class="nd">@QtCore</span><span class="o">.</span><span class="n">pyqtSlot</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">emitAspectLockedToggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; emits aspectLockedToggled</span>

<span class="sd">        :param status: aspectLockedToggled status</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectLockedToggled</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">status</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setTicks"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setTicks">[docs]</a>    <span class="k">def</span> <span class="nf">setTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; launch axes widget</span>

<span class="sd">        :returns: apply status</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cnfdlg</span> <span class="o">=</span> <span class="n">axesDialog</span><span class="o">.</span><span class="n">AxesDialog</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xposition</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yposition</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xposition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yposition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xscale</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yscale</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xscale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yscale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xtext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xtext</span>
        <span class="n">cnfdlg</span><span class="o">.</span><span class="n">ytext</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">ytext</span>

        <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xunits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xunits</span>
        <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yunits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">yunits</span>

        <span class="n">cnfdlg</span><span class="o">.</span><span class="n">createGUI</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xposition</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yposition</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">cnfdlg</span><span class="o">.</span><span class="n">xposition</span><span class="p">,</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yposition</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xscale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yscale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">cnfdlg</span><span class="o">.</span><span class="n">xscale</span><span class="p">,</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yscale</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xtext</span> <span class="o">=</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xtext</span> <span class="ow">or</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">ytext</span> <span class="o">=</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">ytext</span> <span class="ow">or</span> <span class="kc">None</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xunits</span> <span class="o">=</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">xunits</span> <span class="ow">or</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">yunits</span> <span class="o">=</span> <span class="n">cnfdlg</span><span class="o">.</span><span class="n">yunits</span> <span class="ow">or</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">wrupdate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span><span class="p">)</span>

            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.updateTicks"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.updateTicks">[docs]</a>    <span class="k">def</span> <span class="nf">updateTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Ticks values</span>

<span class="sd">        :param record: dict record with the tick parameters:</span>
<span class="sd">                       &quot;position&quot; : [x, y]</span>
<span class="sd">                       &quot;scale&quot; : [sx, sy]</span>
<span class="sd">                       &quot;xtext&quot; : xlabel</span>
<span class="sd">                       &quot;ytext&quot; : ylabel</span>
<span class="sd">                       &quot;xunits&quot; : xunits</span>
<span class="sd">                       &quot;yunits&quot; : yunits</span>
<span class="sd">        :type record: :obj:`dict`&lt;:obj:`str`, `any`&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">update</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s2">&quot;xtext&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xtext</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;xtext&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">update</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="s2">&quot;ytext&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">ytext</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;ytext&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">update</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="s2">&quot;xunits&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xunits</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;xunits&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">update</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="s2">&quot;yunits&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">yunits</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;yunits&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">update</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="s2">&quot;position&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;scale&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">update</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="s2">&quot;scale&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;scale&quot;</span><span class="p">]</span>

            <span class="k">if</span> <span class="s2">&quot;position&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">wrupdate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
                <span class="c1"># print(str(e))</span>

        <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.rawData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.rawData">[docs]</a>    <span class="k">def</span> <span class="nf">rawData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the raw data</span>

<span class="sd">        :returns: current raw data</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sceneObj</span><span class="o">.</span><span class="n">rawdata</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.currentData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.currentData">[docs]</a>    <span class="k">def</span> <span class="nf">currentData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides the data</span>

<span class="sd">        :returns: current data</span>
<span class="sd">        :rtype: :class:`numpy.ndarray`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__data</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.updateMetaData"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.updateMetaData">[docs]</a>    <span class="k">def</span> <span class="nf">updateMetaData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axisscales</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axislabels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">rescale</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update Metadata informations</span>

<span class="sd">        :param axisscales: [xstart, ystart, xscale, yscale]</span>
<span class="sd">        :type axisscales:</span>
<span class="sd">                  [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`]</span>
<span class="sd">        :param axislabels: [xtext, ytext, xunits, yunits]</span>
<span class="sd">        :type axislabels:</span>
<span class="sd">                  [:obj:`float`, :obj:`float`, :obj:`float`, :obj:`float`]</span>
<span class="sd">        :param rescale: rescale or select range window</span>
<span class="sd">        :type rescale: :obj:`True`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">axislabels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xtext</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">axislabels</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> \
                <span class="k">if</span> <span class="n">axislabels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">ytext</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">axislabels</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> \
                <span class="k">if</span> <span class="n">axislabels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">xunits</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">axislabels</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> \
                <span class="k">if</span> <span class="n">axislabels</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">yunits</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">axislabels</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> \
                <span class="k">if</span> <span class="n">axislabels</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">position</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">axisscales</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">axisscales</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">axisscales</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axisscales</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">axisscales</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">axisscales</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">axisscales</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">axisscales</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">axisscales</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">position</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">axisscales</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">axisscales</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span><span class="p">,</span>
                        <span class="n">wrenabled</span><span class="o">=</span><span class="n">rescale</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setStatsWOScaling"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setStatsWOScaling">[docs]</a>    <span class="k">def</span> <span class="nf">setStatsWOScaling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets statistics without scaling flag</span>

<span class="sd">        :param status: statistics without scaling flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        :returns: change status</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">statswoscaling</span> <span class="o">!=</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">statswoscaling</span> <span class="o">=</span> <span class="n">status</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setScalingType"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setScalingType">[docs]</a>    <span class="k">def</span> <span class="nf">setScalingType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalingtype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets intensity scaling types</span>

<span class="sd">        :param scalingtype: intensity scaling type</span>
<span class="sd">        :type scalingtype: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">scaling</span> <span class="o">=</span> <span class="n">scalingtype</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setDoBkgSubtraction"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setDoBkgSubtraction">[docs]</a>    <span class="k">def</span> <span class="nf">setDoBkgSubtraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets do background subtraction flag</span>

<span class="sd">        :param status: do background subtraction flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobkgsubtraction</span> <span class="o">=</span> <span class="n">state</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setDoBFSubtraction"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setDoBFSubtraction">[docs]</a>    <span class="k">def</span> <span class="nf">setDoBFSubtraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets do brightfield subtraction flag</span>

<span class="sd">        :param status: do brightfield subtraction flag</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__intensity</span><span class="o">.</span><span class="n">dobfsubtraction</span> <span class="o">=</span> <span class="n">state</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.image"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.image">[docs]</a>    <span class="k">def</span> <span class="nf">image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iid</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provides imageItem object</span>

<span class="sd">        :param iid: image id</span>
<span class="sd">        :type iid: :obj:`int`</span>
<span class="sd">        :returns: image object</span>
<span class="sd">        :rtype: :class:`pyqtgraph.imageItem.ImageItem`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="n">iid</span><span class="p">]</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setTransformations"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setTransformations">[docs]</a>    <span class="k">def</span> <span class="nf">setTransformations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transpose</span><span class="p">,</span> <span class="n">leftrightflip</span><span class="p">,</span> <span class="n">updownflip</span><span class="p">,</span>
                           <span class="n">orgtranspose</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets coordinate transformations</span>

<span class="sd">        :param transpose: transpose coordinates flag</span>
<span class="sd">        :type transpose: :obj:`bool`</span>
<span class="sd">        :param leftrightflip: left-right flip coordinates flag</span>
<span class="sd">        :type leftrightflip: :obj:`bool`</span>
<span class="sd">        :param updownflip: up-down flip coordinates flag</span>
<span class="sd">        :type updownflip: :obj:`bool`</span>
<span class="sd">        :param orgtranspose: selected transpose coordinates flag</span>
<span class="sd">        :type orgtranspose: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span> <span class="o">!=</span> <span class="n">transpose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span> <span class="o">=</span> <span class="n">transpose</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transposeItems</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">orgtranspose</span> <span class="o">!=</span> <span class="n">orgtranspose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">orgtranspose</span> <span class="o">=</span> <span class="n">orgtranspose</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">leftrightflip</span> <span class="o">!=</span> <span class="n">leftrightflip</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">leftrightflip</span> <span class="o">=</span> <span class="n">leftrightflip</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="s2">&quot;invertX&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">invertX</span><span class="p">(</span><span class="n">leftrightflip</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="sd">&quot;&quot;&quot; version 0.9.10 without invertX &quot;&quot;&quot;</span>
            <span class="c1"># workaround for a bug in old pyqtgraph versions: stretch 0.10</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">_PQGVER</span> <span class="o">&lt;</span> <span class="mi">1202</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">],</span>
                    <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">updownflip</span> <span class="o">!=</span> <span class="n">updownflip</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">updownflip</span> <span class="o">=</span> <span class="n">updownflip</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">invertY</span><span class="p">(</span><span class="n">updownflip</span><span class="p">)</span>
            <span class="c1"># workaround for a bug in old pyqtgraph versions: stretch 0.9.10</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">_PQGVER</span> <span class="o">&lt;</span> <span class="mi">1202</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;viewRange&#39;</span><span class="p">],</span>
                    <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.transformations"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.transformations">[docs]</a>    <span class="k">def</span> <span class="nf">transformations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; povides coordinates transformations</span>

<span class="sd">        :returns: transpose, leftrightflip, updownflip flags,</span>
<span class="sd">                  original transpose</span>
<span class="sd">        :rtype: (:obj:`bool`, :obj:`bool`, :obj:`bool`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">transpose</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">leftrightflip</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">updownflip</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__transformations</span><span class="o">.</span><span class="n">orgtranspose</span>
        <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__transposeItems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes all image items</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__extensions</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">ext</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__transposeAxes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__transposeAxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; transposes axes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__axes</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">position</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setScale</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__toolaxes</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="ImageDisplayWidget.autoRange"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.autoRange">[docs]</a>    <span class="k">def</span> <span class="nf">autoRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets auto range</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">autoRange</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__viewbox</span><span class="o">.</span><span class="n">enableAutoRange</span><span class="p">(</span><span class="s1">&#39;xy&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>
            <span class="c1"># print(str(e))</span>

<div class="viewcode-block" id="ImageDisplayWidget.rangeWindowEnabled"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.rangeWindowEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">rangeWindowEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provide info if range window enabled</span>

<span class="sd">        :returns: range window enabled</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.rangeWindowScale"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.rangeWindowScale">[docs]</a>    <span class="k">def</span> <span class="nf">rangeWindowScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; provide info about range window sclae</span>

<span class="sd">        :returns: range window scale</span>
<span class="sd">        :rtype: :obj:`float`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">enabled</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span> \
           <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wraxes</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setrgb"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setrgb">[docs]</a>    <span class="k">def</span> <span class="nf">setrgb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets RGB on/off</span>

<span class="sd">        :param status: True for on and False for off</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rgb</span> <span class="o">=</span> <span class="n">status</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.rgb"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.rgb">[docs]</a>    <span class="k">def</span> <span class="nf">rgb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets RGB on/off</span>

<span class="sd">        :returns: True for on and False for off</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rgb</span></div>

    <span class="k">def</span> <span class="nf">_hideimages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; hides additional images</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__images</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__maskImages</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

<div class="viewcode-block" id="ImageDisplayWidget.setGradientColors"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setGradientColors">[docs]</a>    <span class="k">def</span> <span class="nf">setGradientColors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets gradientcolors on/off</span>

<span class="sd">        :param status: True for on and False for off</span>
<span class="sd">        :type status: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">status</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hideimages</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__gradientcolors</span> <span class="o">=</span> <span class="n">status</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.gradientColors"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.gradientColors">[docs]</a>    <span class="k">def</span> <span class="nf">gradientColors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets gradientcolors on/off</span>

<span class="sd">        :returns: True for on and False for off</span>
<span class="sd">        :rtype: :obj:`bool`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gradientcolors</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.setLevelMode"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.setLevelMode">[docs]</a>    <span class="k">def</span> <span class="nf">setLevelMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">levelmode</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets levelmode</span>

<span class="sd">        :param levelmode: level mode, i.e. `mono` or `rgba`</span>
<span class="sd">        :type levelmode: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__levelmode</span> <span class="o">=</span> <span class="n">levelmode</span></div>

<div class="viewcode-block" id="ImageDisplayWidget.levelMode"><a class="viewcode-back" href="../../develop/lavuelib/lavuelib.html#lavuelib.imageDisplayWidget.ImageDisplayWidget.levelMode">[docs]</a>    <span class="k">def</span> <span class="nf">levelMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets level mode</span>

<span class="sd">        :returns: level mode, i.e. `mono` or `rgba`</span>
<span class="sd">        :rtype: :obj:`str`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__levelmode</span></div></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">LaVue 2.83.2 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">lavuelib.imageDisplayWidget</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017 DESY, Jan Kotanski &lt;jkotan@mail.desy.de&gt;, Christoph Rosemann &lt;christoph.rosemann@desy.de&gt; 

GNU GENERAL PUBLIC LICENSE, version 2.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>